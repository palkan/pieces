!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},n={},r=function(t,e){return{}.hasOwnProperty.call(t,e)},i=function(t,e){var n,r,i=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,s=n.length;s>o;o++)r=n[o],".."===r?i.pop():"."!==r&&""!==r&&i.push(r);return i.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")},s=function(e){return function(n){var r=o(e),s=i(r,n);return t.require(s,e)}},u=function(t,e){var r={id:t,exports:{}};return n[t]=r,e(r.exports,s(t),r),r.exports},a=function(t,o){var s=i(t,".");if(null==o&&(o="/"),r(n,s))return n[s].exports;if(r(e,s))return u(s,e[s]);var a=i(s,"./index");if(r(n,a))return n[a].exports;if(r(e,a))return u(a,e[a]);throw new Error('Cannot find module "'+t+'" from "'+o+'"')},l=function(t,n){if("object"==typeof t)for(var i in t)r(t,i)&&(e[i]=t[i]);else e[t]=n},c=function(){var t=[];for(var n in e)r(e,n)&&t.push(n);return t};t.require=a,t.require.define=l,t.require.register=l,t.require.list=c,t.require.brunch=!0}}(),require.define({"pieces-core/components/base":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,p,h,_,f={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},y=[].slice;s=e("./utils/klass"),o=e("./events"),a=e("../core/utils"),u=e("../core/nod").Nod,i=e("../grammar/compiler"),l=/\[\]$/,h=function(t,e,n){return Object.defineProperty(t,e,n)},p={"default":function(t,e){return this.__properties__[t]!==e?(this.__properties__[t]=e,!0):!1},bool:function(t,e){return e=!!e,this.__properties__[t]!==e?(this.__properties__[t]=e,!0):!1}},_=function(t,e){return null!=e?e.on===t?this.addClass(e.name):this.removeClass(e.name):void 0},c=function(t,e){return null!=e?t===e.on?this.attr(e.name,e.name):this.attr(e.name,null):void 0},r=function(t){function e(t,n,r){this.node=t,this.host=n,this.options=null!=r?r:{},e.__super__.constructor.apply(this,arguments),this.preinitialize(),this.initialize(),this.init_plugins(),this.init_children(),this.setup_events(),this.postinitialize()}return d(e,t),e.include_plugins=function(){var t,e,n,r,i;for(e=1<=arguments.length?y.call(arguments,0):[],i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(t.included(this));return i},e.requires=function(){var t;return t=1<=arguments.length?y.call(arguments,0):[],this.before_create(function(){var e,n;for(n=[];t.length;){if(e=t.pop(),void 0===this[e])throw Error("Missing required component "+e);n.push(void 0)}return n})},e.active_property=function(t,e,n){var r,i;return null==n&&(n={}),t.__prop_desc__=a.clone(t.__prop_desc__||{}),n.type||(n.type="default"),null!=n["class"]&&"string"==typeof n["class"]&&(n["class"]={name:n["class"],on:!0}),null!=n.node_attr&&"string"==typeof n.node_attr&&(n.node_attr={name:n.node_attr,on:!0}),t.__prop_desc__[e]=n,r={get:function(){return this.__properties__[e]}},n.readonly?r.writable=!1:r.set=function(t){return p[n.type].call(this,e,t)&&(t=this.__properties__[e],_.call(this,t,n["class"]),c.call(this,t,n.node_attr),null!=n.event&&this.trigger(n.event,t)),t},"bool"===n.type&&(null!=n.functions&&(t[n.functions[0]]=function(){return this[e]=!0,this},t[n.functions[1]]=function(){return this[e]=!1,this}),n.toggle&&(i="string"==typeof n.toggle?n.toggle:"toggle_"+e,t[i]=function(t){return null==t&&(t=null),this[e]=null===t?!this[e]:t,this})),h(t,e,r)},e.prototype.preinitialize=function(){var t,e,n,r,i=this;u.store(this,!0),this.__properties__={},this.__components__=[],this.__plugins__=[],this.pid=this.data("pid")||this.attr("pid")||this.node.id,n=this.__prop_desc__,r=[];for(e in n)f.call(n,e)&&(t=n[e],r.push(function(t,e){return i.__properties__[t]=e["default"]}(e,t)));return r},e.prototype.initialize=function(){return(this.options.disabled||this.hasClass(s.DISABLED))&&this.disable(),(this.options.hidden||this.hasClass(s.HIDDEN))&&this.hide(),(this.options.active||this.hasClass(s.ACTIVE))&&this.activate(),this._initialized=!0,this.trigger(o.Initialized,!0,!1)},e.register_callback("initialize"),e.prototype.init_plugins=function(){var t,e,n,r;if(null!=this.options.plugins){for(r=this.options.plugins,e=0,n=r.length;n>e;e++)t=r[e],this.attach_plugin(this.constructor.lookup_module(t));delete this.options.plugins}},e.prototype.attach_plugin=function(t){return null!=t?(a.debug_verbose("plugin attached "+t.prototype.id),this.__plugins__.push(t.attached(this))):void 0},e.prototype.init_children=function(){var t,e,n,r,i,o=this;for(i=this.find_cut("."+s.PI),e=function(t){var e,n,r;return n=u.create(t).piecify(o),(null!=n?n.pid:void 0)?(l.test(n.pid)?(e=o[r=n.pid.slice(0,-2)]||(o[r]=[]),e.indexOf(n)>-1||e.push(n)):o[n.pid]=n,o.__components__.push(n)):void 0},n=0,r=i.length;r>n;n++)t=i[n],e(t)},e.prototype.setup_events=function(){var t,e,n,r,o,s,u;s=this.options.events;for(t in s)for(n=s[t],u=n.split(/;\s*/),r=0,o=u.length;o>r;r++)e=u[r],this.on(t,i.str_to_event_handler(e,this));delete this.options.events},e.prototype.postinitialize=function(){return this.trigger(o.Created,!0,!1)},e.register_callback("postinitialize",{as:"create"}),e.prototype.piecify=function(){var t,e,n,r;for(this.__components__.length=0,this.init_children(),r=this.__components__,e=0,n=r.length;n>e;e++)t=r[e],t.piecify(this);return this},e.prototype.trigger=function(t,n,r){return this._initialized&&(this.enabled||t===o.Enabled)?e.__super__.trigger.call(this,t,n,r):void 0},e.prototype.bubble_event=function(t){return null!=this.host?this.host.trigger(t):void 0},e.active_property(e.prototype,"visible",{type:"bool","default":!0,event:o.Hidden,"class":{name:s.HIDDEN,on:!1},functions:["show","hide"]}),e.active_property(e.prototype,"enabled",{type:"bool","default":!0,event:o.Enabled,"class":{name:s.DISABLED,on:!1},functions:["enable","disable"]}),e.active_property(e.prototype,"active",{type:"bool","default":!0,event:o.Active,"class":{name:s.ACTIVE,on:!1},functions:["activate","deactivate"]}),e.prototype.dispose=function(){var t,n,r,i;if(!this._disposed){for(this._initialized=!1,null!=this.host&&this.host.remove_component(this),i=this.__plugins__,n=0,r=i.length;r>n;n++)t=i[n],t.dispose();return this.__plugins__.length=0,this.__components__.length=0,this.__properties__={},e.__super__.dispose.apply(this,arguments),this.trigger(o.Destroyed,!0,!1)}},e.prototype.remove_component=function(t){return t.pid?(l.test(t.pid)?this[""+t.pid.slice(0,-2)]&&delete this[""+t.pid.slice(0,-2)]:delete this[t.pid],this.__components__.splice(this.__components__.indexOf(t),1)):void 0},e.prototype.remove_children=function(){var t,n,r,i;for(n=this.__components__.slice(),r=0,i=n.length;i>r;r++)t=n[r],this.remove_component(t),t.remove();return e.__super__.remove_children.apply(this,arguments)},e}(u),n.exports=r}}),require.define({"pieces-core/components/base_input":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("./base"),o=e("./events"),s=e("../core/utils"),u=function(t){return t},l=function(t){return s.serialize(t)},i=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.postinitialize=function(){return this.input||(this.input="INPUT"===this.node.nodeName?this:this.find("input")),this._serializer=this.options.serialize===!0?l:u,null==this.options.default_value||s.serialize(this.value())?void 0:this.value(this.options.default_value)},e.prototype.value=function(t){return null!=t?(this.input.node.value=t,this):this._serializer(this.input.node.value)},e.prototype.clear=function(t){return null==t&&(t=!1),this.value(null!=this.options.default_value?this.options.default_value:""),t?void 0:this.trigger(o.InputEvent.Clear)},e}(r),n.exports=i}}),require.define({"pieces-core/components/events/index":function(t,e,n){var r=e("./pi_events"),i=e("../../core/utils");i.extend(r,e("./input_events")),n.exports=r}}),require.define({"pieces-core/components/events/input_events":function(t,e,n){"use strict";n.exports={InputEvent:{Change:"changed",Clear:"cleared",Editable:"editable"},FormEvent:{Update:"updated",Submit:"submited",Invalid:"invalid"}}}}),require.define({"pieces-core/components/events/pi_events":function(t,e,n){"use strict";n.exports={Initialized:"initialized",Created:"creation_complete",Destroyed:"destroyed",Enabled:"enabled",Hidden:"hidden",Active:"active",Selected:"selected",Update:"update"}}}),require.define({"pieces-core/components/form":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,p,h,_,f={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("./base"),o=e("./events"),c=e("./utils/validator"),p=e("../core/utils"),u=e("../core/former/former"),l=e("../core/nod").Nod,i=e("./base_input"),a=e("./utils/klass"),h=function(t){return t.indexOf("[]")>-1},s=function(t){function e(){return _=e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.postinitialize=function(){var t=this;return e.__super__.postinitialize.apply(this,arguments),this._cache={},this._value={},this._invalids=[],this.former=new u(this.node,this.options),this.read_values(),this.on(o.InputEvent.Change,function(e){return e.cancel(),t.validate_nod(e.target)?t.update_value(e.target.name(),e.data):void 0}),this.on("change",function(e){return p.is_input(e.target.node)&&t.validate_nod(e.target)?t.update_value(e.target.node.name,t.former._parse_nod_value(e.target.node)):void 0}),this.form="FORM"===this.node.nodeName?this:this.find("form"),null!=this.form?this.form.on("submit",function(e){return e.cancel(),t.submit()}):void 0},e.prototype.submit=function(){return this.read_values(),this.validate()===!0?this.trigger(o.FormEvent.Submit,this._value):void 0},e.prototype.value=function(t){var e=this;return null!=t?(this._value={},this.former.traverse_nodes(this.node,function(n){return e.fill_value(n,t)}),this.read_values(),this):this._value},e.prototype.clear=function(t){var e=this;return null==t&&(t=!1),this._value={},this.former.traverse_nodes(this.node,function(t){return e.clear_value(t)}),this.former.options.clear_hidden===!1&&this.read_values(),t?void 0:this.trigger(o.InputEvent.Clear)},e.prototype.read_values=function(){var t,e=this;return t=[],this.former.traverse_nodes(this.node,function(n){var r;return(r=l.fetch(n._nod))instanceof i&&r.name()?(h(name)||(e._cache[r.name()]=r),t.push({name:r.name(),value:r.value()})):p.is_input(n)&&n.name?(h(n.name)||(e._cache[n.name]=l.create(n)),t.push({name:n.name,value:e.former._parse_nod_value(n)})):void 0}),this._value=this.former.process_name_values(t)},e.prototype.find_by_name=function(t){var e;return null!=this._cache[t]?this._cache[t]:(e=this.find("[name="+t+"]"),null!=e?this._cache[t]=e:void 0)},e.prototype.fill_value=function(t,e){var n;if((n=l.fetch(t._nod))instanceof i&&n.name()){if(e=this.former._nod_data_value(n.name(),e),null==e)return;return n.value(e)}return p.is_input(t)?this.former._fill_nod(t,e):void 0},e.prototype.validate=function(){var t=this;return this.former.traverse_nodes(this.node,function(e){return t.validate_value(e)}),this._invalids.length?(this.trigger(o.FormEvent.Invalid,this._invalids),!1):!0},e.prototype.validate_value=function(t){var e;return(e=l.fetch(t._nod))instanceof i?this.validate_nod(e):void 0},e.prototype.validate_nod=function(t){var e,n,r,i,o,s;if(r=t.data("validates")){for(e=!0,s=r.split(" "),i=0,o=s.length;o>i;i++)if(n=s[i],!c.validate(n,t,this)){t.addClass(a.INVALID),e=!1;break}return e?(t.removeClass(a.INVALID),t.__invalid__&&(this._invalids.splice(this._invalids.indexOf(t.name()),1),delete t.__invalid__),!0):(null==t.__invalid__&&this._invalids.push(t.name()),t.__invalid__=!0,!1)}return!0},e.prototype.clear_value=function(t){var e;return(e=l.fetch(t._nod))instanceof i?e.clear():p.is_input(t)?this.former._clear_nod(t):void 0},e.prototype.update_value=function(t,e,n){return null==n&&(n=!1),t&&(t=this.former.transform_name(t),e=this.former.transform_value(e),h(t)!==!0)?(p.obj.set_path(this._value,t,e),n?void 0:this.trigger(o.FormEvent.Update,this._value)):void 0},e}(r),n.exports=s}}),require.define({"pieces-core/components/index":function(t,e,n){"use strict";var r={};r.Events=e("./events"),r.Base=e("./base"),r.BaseInput=e("./base_input"),r.TextInput=e("./textinput"),r.Form=e("./form"),n.exports=r}}),require.define({"pieces-core/components/textinput":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("./base"),o=e("./events"),a=e("../core/utils"),i=e("./base_input"),s=e("./utils/klass"),u=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.postinitialize=function(){var t=this;return e.__super__.postinitialize.apply(this,arguments),this.editable=!0,(this.options.readonly||this.hasClass(s.READONLY))&&this.readonly(),this.input.on("change",function(e){return e.cancel(),t.trigger(o.InputEvent.Change,t.value())})},e.active_property(e.prototype,"editable",{type:"bool","default":!0,event:o.InputEvent.Editable,"class":{name:s.READONLY,on:!1},node_attr:{name:"readonly",on:!1}}),e.prototype.readonly=function(t){return null==t&&(t=!0),this.editable=!t},e}(i),n.exports=u}}),require.define({"pieces-core/components/utils/guesser":function(t,e,n){"use strict";var r,i,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},s={}.hasOwnProperty;i=e("../../core/utils"),r=function(){function t(){}return t.klasses=[],t.klass_reg=null,t.klass_to_component={},t.tag_to_component={},t.specials={},t.compile_klass_reg=function(){return this.klass_reg=this.klasses.length?new RegExp("("+this.klasses.map(function(t){return"(\\b"+i.escapeRegexp(t)+"\\b)"}).join("|")+")","g"):null},t.rules_for=function(t,e,n,r){var i,o,s,u,a,l,c;if(null==e&&(e=[]),null==n&&(n=[]),e.length){for(u=0,l=e.length;l>u;u++)i=e[u],this.klass_to_component[i]=t,this.klasses.push(i);this.compile_klass_reg()}if(n.length)for(a=0,c=n.length;c>a;a++)o=n[a],((s=this.tag_to_component)[o]||(s[o]=[])).push(t);return"function"==typeof r?this.specials[t]=r:void 0},t.find=function(t){var e,n,r,u,a,l,c,p,h,_,f,d,y,v,g=this;if(u=[],this.klass_reg&&(d=t.node.className.match(this.klass_reg))&&(u=i.arr.uniq(d),1===u.length))return this.klass_to_component[u[0]];if(u=u.map(function(t){return g.klass_to_component[t]}),l=t.node.nodeName.toLowerCase(),"input"===l&&(l+="["+t.node.type+"]"),null!=this.tag_to_component[l]){if(c=[],u.length)for(y=this.tag_to_component[l],p=0,_=y.length;_>p;p++)e=y[p],o.call(u,e)>=0&&c.push(e);else c=this.tag_to_component[l];if(c=i.arr.uniq(c),1===c.length)return c[0];u=c}if(u.length){for(h=0,f=u.length;f>h;h++)if(n=u[h],null!=this.specials[n]&&this.specials[n].call(null,t))return n;return u[u.length-1]}v=this.specials;for(r in v)if(s.call(v,r)&&(a=v[r],a.call(null,t)))return r;return"base"},t}(),n.exports=r}}),require.define({"pieces-core/components/utils/initializer":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c;s=e("./guesser"),a=e("../../core/nod").Nod,o=e("../../core/config"),i=e("../"),l=e("../../core/utils"),c=/^on_(.+)/i,u=function(){function t(){}return t.builders=[],t.append_builder=function(t){return this.builders.push(t)},t.insert_builder_at=function(t,e){return this.builders.splice(e,0,t)},t.insert_builder_before=function(t,e){var n;return(n=this.builders.indexOf(e))>-1?this.insert_builder_at(t,n):this.append_builder(t)},t.insert_builder_after=function(t,e){var n;return(n=this.builders.indexOf(before_builder))>-1?this.insert_builder_at(t,n+1):this.append_builder(t)},t.init=function(t,e){var n,r,i,o;for(t=t instanceof a?t:a.create(t),o=this.builders,r=0,i=o.length;i>r;r++)if(n=o[r],n.match(t))return n.build(t,e)},t.gather_options=function(t,e){var n,r,i,s;null==e&&(e="base"),i=l.clone(t.data()),i.plugins=null!=i.plugins?i.plugins.split(/\s+/):null,i.events={};for(n in i)s=i[n],(r=n.match(c))&&(i.events[r[1]]=s);return l.merge(l.obj.get_path(o,e)||{},i)},t}(),r=function(){function t(){}return t.match=l.truthy,t.build=function(t,e){var n;return n=this.guess_component(t),null!=n?t instanceof n?t:new n(t.node,e,u.gather_options(t,"components."+n.class_name)):void 0},t.guess_component=function(t){var e,n;return n=t.data("component")||s.find(t),e=l.obj.get_class_path(i,n),null==e?l.error("Unknown component "+n,t.data()):(e.class_name=n,l.debug_verbose("Component created: "+n),e)},t}(),u.append_builder(r),n.exports=u}}),require.define({"pieces-core/components/utils/klass":function(t,e,n){"use strict";var r;r={PI:"pi",DISABLED:"is-disabled",HIDDEN:"is-hidden",ACTIVE:"is-active",READONLY:"is-readonly",INVALID:"is-invalid",SELECTED:"is-selected",EMPTY:"is-empty"},n.exports=r}}),require.define({"pieces-core/components/utils/setup":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,p,h;s=e("../../core/events").EventDispatcher,l=e("../../core/nod").Nod,u=e("./initializer"),a=e("./klass"),o=e("../../grammar/compiler"),h=e("../../core/utils"),i=e("../../core/app"),p=function(t,e){return u.init(t,e||t.parent(a.PI))},s.Global=new s,l.root=new l.Root,l.root.initialize(),c=function(t,e){return h.obj.get_path(window.pi.app.view,t)},h.extend(l.prototype,{piecify:function(t){return p(this,t)},pi_call:function(t,e){return this._pi_call&&this._pi_action===e||(this._pi_action=e,this._pi_call=o.str_to_fun(e,t)),this._pi_call.call(null)}}),l.root.ready(function(){return l.root.listen("a","click",function(t){var e;(e=t.target.attr("href"))&&"@"===e[0]&&(t.cancel(),h.debug("handle pi click: "+t.target.attr("href")),t.target.pi_call(t.target,t.target.attr("href")))})}),r=function(t){return"@"===t[0]?c(t.slice(1)):h.is_html(t)?l.create(t):l.root.find(t)},n.exports=r}}),require.define({"pieces-core/components/utils/validator":function(t,e,n){"use strict";var r,i,o;i=e("../../core/utils"),o=/(\w+)(?:\(([\w\-\/]+)\))/,r=function(){function t(){}return t.add=function(t,e){return this[t]=e},t.validate=function(t,e,n){var r,s;return(s=t.match(o))&&(t=s[1],r=i.serialize(s[2])),this[t](e.value(),e,n,r)},t.email=function(t){return i.is_email(t)},t.len=function(t,e,n,r){return(t+"").length>=r},t.truth=function(t){return!!i.serialize(t)},t.presence=function(t){return t&&(t+"").length>0},t.digital=function(t){return i.is_digital(t+"")},t.confirm=function(t,e,n){var r,i;return i=e.name().replace(/([\]]+)?$/,"_confirmation$1"),r=n.find_by_name(i),null==r?!1:r.value()===t},t}(),n.exports=r}}),require.define({"pieces-core/controllers/base":function(t,e,n){"use strict";var r,i,o,s={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("./context"),o=e("../core/utils"),r=function(t){function e(t){e.__super__.constructor.call(this,t),this.init_modules()}return u(e,t),e.prototype.id="base",e.prototype.set_view=function(t){return this.view=t,this.view.controller=this,this},e.prototype.init_modules=function(t){var e,n,r,i;r=this.options.modules,i=[];for(e in r)n=r[e],i.push(this.mixin(this.constructor.lookup_module(e)));return i},e.prototype.load=function(t){var n;return null==t&&(t={}),n=e.__super__.load.apply(this,arguments),this.view.loaded(t.params),n},e.prototype.activate=function(t){null==t&&(t={}),this.view.activated(t.params)},e.prototype.deactivated=function(){this.view.deactivated()},e.prototype.unload=function(){this.view.unloaded()},e.prototype.exit=function(t){return this.host_context.switch_back(t)},e.prototype["switch"]=function(t,e){return this.host_context.switch_context(this.id,t,e)},e}(i),n.exports=r}}),require.define({"pieces-core/controllers/context":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("../core/core"),u=e("../core/utils"),o=e("../core/utils/history"),r=function(t){function e(t){this.options=null!=t?t:{},e.__super__.constructor.apply(this,arguments),this.options.strategy&&(this.strategy=s.get(this.options.strategy),this.mixin(this.strategy)),this.preinitialize()}return h(e,t),e.prototype.preinitialize=function(){return this._contexts={}},e.register_callback("postinitialize",{as:"create",only:"after"}),e.prototype.add_context=function(t,e){var n;return null==e&&(e={}),this._contexts[null!=(n=e.as)?n:t.id]=t,t.host_context=this},e.prototype.initialize=function(){return this._initialized=!0},e.register_callback("initialize"),e.prototype.load=function(){var t;return this._initialized||this.initialize(),u.promise.as(null!=(t=this.strategy)?t.load(this):void 0)},e.register_callback("load"),e.prototype.unload=function(){var t;return null!=(t=this.strategy)?t.unload(this):void 0},e.register_callback("unload"),e.prototype.activate=function(){},e.prototype.deactivate=function(){},e.prototype.has_context=function(t){return!!this._contexts[t]},e.prototype.dispose=function(){var t;return this._initialized=!1,this._contexts={},null!=(t=this.strategy)?t.dispose(this):void 0},e}(i),s=function(){function t(){}return t.storage={},t.register=function(t,e){return this.storage[t]=e},t.get=function(t){return this.storage[t]},t}(),s.OneForAll=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.mixedin=function(t){return t._history=new o},e.load=function(t){var e,n=this;return this.context=t,this.context.context||this.__loading?void 0:(e=this.context.options["default"]||"main")&&this.context.has_context(e)?this.context.__loading_promise=this.context.switch_to(e).then(function(){return n.context.context=n.context._contexts[e],n.context.context_id=e,delete n.context.__loading_promise},function(t){throw delete n.context.__loading_promise,u.error(t),t}):void 0},e.unload=function(t){var e=this;return this.context=t,(this.context.__loading_promise||u.promise.resolved()).then(function(){var t;return null!=(t=e.context.context)?t.unload():void 0})},e.dispose=function(t){return this.context=t,this.context._history=new o,delete this.context.context,delete this.context.context_id,delete this.context.__loading_promise},e.prototype.switch_to=function(t,e,n){var r,i,o,s,a=this;return null==n&&(n=!1),t&&this._contexts[t]?(r={from:this.context_id,params:e},o=this._contexts[t],i=null!=(s="function"==typeof o.preload?o.preload():void 0)?s:u.promise.resolved(),i.then(function(){var e;return null!=(e=a.context)&&e.unload(),o.load(r),n||a._history.push(t),a.context=o,a.context_id=t})):u.promise.rejected("Undefined target context: "+t)},e.prototype.switch_back=function(t){var e;return e=this._history.prev(),e?this.switch_to(e,t,!0):u.promise.resolved()},e.prototype.switch_forward=function(t){var e;return e=this._history.next(),e?this.switch_to(e,t,!0):u.promise.resolved()},e}(i),s.OneByOne=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.switch_to=function(t,e,n,r){var i,o,s,a,l,c,p=this;return null==n&&(n=!1),null==r&&(r=!0),!t||"string"==typeof t&&!this._contexts[t]?u.promise.rejected("Undefined target context: "+t):(l="object"==typeof t?[t.id,t.up]:[t,r],a=l[0],r=l[1],i={from:this.context_id,params:e},s=this._contexts[a],o=null!=(c="function"==typeof s.preload?s.preload():void 0)?c:u.promise.resolved(),o.then(function(){var t,e;return r?(null!=(t=p.context)&&t.deactivate(),s.load(i)):(null!=(e=p.context)&&e.unload(),s.activate(i)),n||p._history.push({id:a,up:r}),p.context=s,p.context_id=a}))},e.prototype.switch_up=function(t,e){return this.switch_to(t,e)},e.prototype.switch_down=function(t,e){return this.switch_to(t,e,!1,!1)},e.prototype.switch_forward=s.OneForAll.prototype.switch_forward,e.prototype.switch_back=function(t){var e,n;return(n=this._history.prev())?(e=u.merge(n,{up:!n.up}),this.switch_to(e,t,!0)):u.promise.resolved()},e}(s.OneForAll),s.AllForOne=function(t){function e(){return c=e.__super__.constructor.apply(this,arguments)}return h(e,t),e.load=function(t){var e,n,r,i;this.context=t,r=this.context._contexts,i=[];for(n in r)p.call(r,n)&&(e=r[n],i.push(e.load()));return i},e.unload=function(t){var e,n,r,i;this.context=t,r=this.context._contexts,i=[];for(n in r)p.call(r,n)&&(e=r[n],i.push(e.unload()));return i},e.dispose=function(t){this.context=t},e.prototype.context=function(t){return this._contexts[t]},e}(i),s.register("one_for_all",s.OneForAll),s.register("one_by_one",s.OneByOne),s.register("all_for_one",s.AllForOne),n.exports=r}}),require.define({"pieces-core/controllers/index":function(t,e,n){"use strict";var r={};r.Context=e("./context"),r.Page=e("./page"),r.Base=e("./base"),n.exports=r}}),require.define({"pieces-core/controllers/initializer":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,p;s=e("./index"),c=e("../core/utils"),r=e("../views/base"),l=e("../views"),u=e("../components/utils/initializer"),a=e("./page"),i=e("../grammar/compiler"),p=/^(\w+)(\(.*\))?$/,o=function(){function t(){}return t.match=function(t){return!!t.data("controller")},t.build=function(t,e){var n,i,o,p,h,_,f,d,y,v,g,m,b;return _=u.gather_options(t),n=_.controller.split(/\s*\|\s*/),o=n[0]||"base",i=c.obj.get_class_path(s,o),null==i?c.error("Unknown controller "+_.controller):(f=null!=(g=null!=(m=_.view)?m.split(/\s*\|\s*/):void 0)?g:[o],v=f[0]||o,y=c.obj.get_class_path(l,v)||r,delete _.view,delete _.controller,_.modules=this.parse_modules(n.slice(1)),p=new i(c.clone(_)),delete _.strategy,delete _["default"],c.extend(_.modules,this.parse_modules(f.slice(1)),!0),d=new y(t.node,e,_),p.set_view(d),h=(b=e.view())?b.controller:a.instance,h.add_context(p,{as:d.pid}),d)},t.parse_modules=function(t){var e,n,r,o,s;for(e={},r=function(t){var n,r,o,s,u;return u=t.match(p),s=u[0],n=u[1],o=u[2],null!=o&&(r=i.compile_fun(o).call()),e[n]=r},o=0,s=t.length;s>o;o++)n=t[o],r(n);return e},t}(),u.insert_builder_at(o,0),n.exports=o}}),require.define({"pieces-core/controllers/page":function(t,e,n){"use strict";var r,i,o,s,u,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("./context"),u=e("../core/utils"),i=e("../core/config"),r=e("../grammar/compiler"),s=function(t){function e(){this.constructor.instance=this,e.__super__.constructor.call(this,u.merge({strategy:"one_for_all","default":"main"},i.page))}return l(e,t),e.instance=null,e}(o),r.modifiers.push(function(t){return"@@"===t.slice(0,2)&&(t="@app.page.context."+t.slice(2)),t}),n.exports=s}}),require.define({"pieces-core/core/app":function(t,e,n){"use strict";var r,i,o,s;i=e("./nod").Nod,o=e("../controllers/page"),s=e("./utils"),r=function(){function t(){}return t.prototype.initialize=function(t){return this._initialized?!1:(this.page=new o,this.view=(null!=t?t:i.root).piecify(),this._initialized=!0,this.page.load())},t.prototype.reinitialize=function(){return this._initialized?(this.page.dispose(),this.view.piecify(),this.page.load()):!1},t.prototype.dispose=function(){return this._initialized?(this.page.dispose(),this.view.remove_children(),!0):!1},t}(),n.exports=r}}),require.define({"pieces-core/core/config":function(t,e,n){"use strict";var r;r={},n.exports=r}}),require.define({"pieces-core/core/core":function(t,e,n){"use strict";var r,i,o=[].slice;i=e("./utils"),r=function(){function t(){var t,e,n,r,i,o=this;for(i=this.constructor.callbacked||[],e=function(t){return o[t]=o["__"+t]},n=0,r=i.length;r>n;n++)t=i[n],e(t)}var e,n;return t.include=function(){var t,e,n,r,s;for(e=1<=arguments.length?o.call(arguments,0):[],s=[],n=0,r=e.length;r>n;n++)t=e[n],i.extend(this.prototype,t.prototype,!0,["constructor"]),s.push(t.included(this));return s},t.extend=function(){var t,e,n,r,s;for(e=1<=arguments.length?o.call(arguments,0):[],s=[],n=0,r=e.length;r>n;n++)t=e[n],i.extend(this,t,!0,["__super__"]),s.push(t.extended(this));return s},t.alias=function(t,e){this.prototype[t]=function(){var t;return t=1<=arguments.length?o.call(arguments,0):[],this[e].apply(this,t)}},t.class_alias=function(t,e){this[t]=this[e]},t.included=i.truthy,t.extended=i.truthy,t.mixedin=i.truthy,t.register_callback=function(t,e){var n,r,s,u,a,l,c=this;for(null==e&&(e={}),n=e.as||t,r=e.only||["before","after"],r=i.to_a(r),s=function(t){return c[""+t+"_"+n]=function(e){var r,i;return this.prototype["_"+t+"_"+n]&&!this.prototype.hasOwnProperty("_"+t+"_"+n)&&(this.prototype["_"+t+"_"+n]=this.prototype["_"+t+"_"+n].slice()),((r=this.prototype)[i="_"+t+"_"+n]||(r[i]=[])).push(e)}},u=0,a=r.length;a>u;u++)l=r[u],s(l);return this.prototype["__"+t]=function(){var e,r;return e=1<=arguments.length?o.call(arguments,0):[],this.run_callbacks("before_"+n,e),r=this.constructor.prototype[t].apply(this,e),this.run_callbacks("after_"+n,e),r},(this.callbacked||(this.callbacked=[])).push(t)},t.lookup_module=function(t){var e,n;for(t=i.camelCase(t),e=this;null!=e;){if(null!=e[t])return e[t];e=null!=(n=e.__super__)?n.constructor:void 0}return i.debug("module not found: "+t),null},t.prototype.mixin=function(){var t,e,n,r,s;for(e=1<=arguments.length?o.call(arguments,0):[],s=[],n=0,r=e.length;r>n;n++)t=e[n],"string"==typeof t&&(t=this.constructor.lookup_module(t)),t&&(i.extend(this,t.prototype,!0,["constructor"]),s.push(t.mixedin(this)));return s},n=function(t){return null!=this["__h__"+t]?this["__h__"+t]:void 0},e=function(t,e){return this["__h__"+t]=e},t.event_handler=function(t,r){return null==r&&(r={}),"function"!=typeof this.prototype[t]?i.error("undefined handler",this,t):(this.prototype[t]=i.func.unwrap(this.prototype[t],r),this.prototype[t]=i.func.wrap(this.prototype[t],i.curry(n,t),i.curry(e,t),{break_if_value:!0}))},t.prototype.run_callbacks=function(t,e){var n,r,i,o,s;for(o=this["_"+t]||[],s=[],r=0,i=o.length;i>r;r++)n=o[r],s.push(n.apply(this,e));return s},t.prototype.delegate_to=function(){var t,e,n,r,i,s,u=this;for(n=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],n="string"==typeof n?this[n]:n,r=function(t){return u[t]=function(){var e;return e=1<=arguments.length?o.call(arguments,0):[],n[t].apply(n,e)}},i=0,s=e.length;s>i;i++)t=e[i],r(t)},t}(),n.exports=r}}),require.define({"pieces-core/core/events/aliases":function(t,e,n){"use strict";var r,i;i=e("../nod").NodEvent,r=e("../utils/browser"),r.info().gecko&&i.register_alias("mousewheel","DOMMouseScroll")}}),require.define({"pieces-core/core/events/events":function(t,e,n){"use strict";var r,i,o,s,t,u,a,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};u=e("../utils"),r=e("../core"),t={},i=function(t){function e(t,e,n){this.target=e,null==n&&(n=!0),null!=t&&"object"==typeof t?u.extend(this,t):this.type=t,this.bubbles=n,this.canceled=!1,this.captured=!1}return c(e,t),e.prototype.cancel=function(){return this.canceled=!0},e}(r),t.Event=i,s=function(t){function e(t,n,r,i,o){this.type=t,this.handler=n,this.context=null!=r?r:null,this.disposable=null!=i?i:!1,this.conditions=o,e.__super__.constructor.apply(this,arguments),null==this.handler._uid&&(this.handler._uid="fun"+u.uid()),this.uid=""+this.type+":"+this.handler._uid,"function"!=typeof this.conditions&&(this.conditions=u.truthy),null!=this.context&&(null==this.context._uid&&(this.context._uid="obj"+u.uid()),this.uid+=":"+this.context._uid)}return c(e,t),e.prototype.dispatch=function(t){return!this.disposed&&this.conditions(t)?(this.handler.call(this.context,t)!==!1&&(t.captured=!0),this.disposable?this.dispose():void 0):void 0},e.prototype.dispose=function(){return this.handler=this.context=this.conditions=null,this.disposed=!0},e}(r),a=function(t){return"string"==typeof t?t.split(/\,\s*/):Array.isArray(t)?t:[null];

},t.EventListener=s,o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.listeners={},this.listeners_by_key={}}return c(e,t),e.prototype.listeners="",e.prototype.listeners_by_key="",e.prototype.on=function(t,e,n,r){var i,o,u,l,c;for(l=a(t),c=[],o=0,u=l.length;u>o;o++)i=l[o],c.push(this.add_listener(new s(i,e,n,!1,r)));return c},e.prototype.one=function(t,e,n,r){return this.add_listener(new s(t,e,n,!0,r))},e.prototype.off=function(t,e,n,r){var i,o,s,u,l;for(u=a(t),l=[],o=0,s=u.length;s>o;o++)i=u[o],l.push(this.remove_listener(i,e,n,r));return l},e.prototype.trigger=function(t,e,n){var r,o,s,a;if(null==n&&(n=!0),t instanceof i||(t=new i(t,this,n)),null!=e&&(t.data=e),t.currentTarget=this,null!=this.listeners[t.type]){for(u.debug_verbose("Event: "+t.type,t),a=this.listeners[t.type],o=0,s=a.length;s>o&&(r=a[o],r.dispatch(t),t.canceled!==!0);o++);this.remove_disposed_listeners()}t.captured!==!0&&t.bubbles&&this.bubble_event(t)},e.prototype.bubble_event=function(t){},e.prototype.add_listener=function(t){var e,n;return(e=this.listeners)[n=t.type]||(e[n]=[]),this.listeners[t.type].push(t),this.listeners_by_key[t.uid]=t},e.prototype.remove_listener=function(t,e,n,r){var i,o,s,u,a;if(null==n&&(n=null),null==r&&(r=null),null==t)return this.remove_all();if(null!=this.listeners[t]){if(null==e){for(a=this.listeners[t],s=0,u=a.length;u>s;s++)i=a[s],i.dispose();return this.remove_type(t),void this.remove_disposed_listeners()}o=""+t+":"+e._uid,null!=n&&(o+=":"+n._uid),i=this.listeners_by_key[o],null!=i&&(delete this.listeners_by_key[o],this.remove_listener_from_list(t,i))}},e.prototype.remove_listener_from_list=function(t,e){return null!=this.listeners[t]&&this.listeners[t].indexOf(e)>-1&&(this.listeners[t]=this.listeners[t].filter(function(t){return t!==e}),!this.listeners[t].length)?this.remove_type(t):void 0},e.prototype.remove_disposed_listeners=function(){var t,e,n,r;n=this.listeners_by_key,r=[];for(t in n)e=n[t],e.disposed?(this.remove_listener_from_list(e.type,e),r.push(delete this.listeners_by_key[t])):r.push(void 0);return r},e.prototype.remove_type=function(t){return delete this.listeners[t]},e.prototype.remove_all=function(){return this.listeners={},this.listeners_by_key={}},e}(r),t.EventDispatcher=o,n.exports=t}}),require.define({"pieces-core/core/events/index":function(t,e,n){"use strict";n.exports=e("./events")}}),require.define({"pieces-core/core/events/resize_delegate":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};l=e("../utils"),i=e("./events").EventListener,r=e("../core"),o=e("../nod").Nod,s=e("../nod").NodEvent,a=function(t){function e(t,n){var r,i=this;this.nod=t,this.handler=n,this._w=this.nod.width(),this._h=this.nod.height(),r=function(t){return i._w!==t.width||i._h!==t.height?(i._w=t.width,i._h=t.height,!0):!1},e.__super__.constructor.call(this,"resize",this.handler,this.nod,!1,r)}return p(e,t),e}(i),u=function(t){function e(){this.listeners=[]}return p(e,t),e.prototype.add=function(t,e){return this.listeners.push(new a(t,e)),1===this.listeners.length?this.listen():void 0},e.prototype.remove=function(t){var e,n,r,i,o,s;for(e=!1,s=this.listeners,n=i=0,o=s.length;o>i;n=++i)if(r=s[n],r.nod===t){e=!0;break}return e===!0?this.listeners.splice(n,1):void 0},e.prototype.listen=function(){return s.add(o.win.node,"resize",this.resize_listener())},e.prototype.off=function(){return s.remove(o.win.node,"resize",this.resize_listener())},e.prototype.resize_listener=function(t){var e,n,r,i,o;for(i=this.listeners,o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(e.dispatch(this._create_event(e)));return o},e.event_handler("resize_listener",{throttle:300}),e.prototype._create_event=function(t){var e;return e=t.nod,{type:"resize",target:e,width:e.width(),height:e.height()}},e}(r),n.exports=u}}),require.define({"pieces-core/core/former/former":function(t,e,n){"use strict";var r,i,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};i=e("../utils"),r=function(){function t(t,e){this.nod=t,this.options=null!=e?e:{},this.options.rails===!0&&(this.options.name_transform=this._rails_name_transform),this.options.serialize===!0&&(this.options.parse_value=i.serialize)}return t.parse=function(e,n){return new t(e,n).parse()},t.fill=function(e,n){return new t(e,n).fill()},t.clear=function(e,n){return new t(e,n).clear()},t.prototype.parse=function(){return this.process_name_values(this.collect_name_values())},t.prototype.fill=function(t){var e=this;return this.traverse_nodes(this.nod,function(n){return e._fill_nod(n,t)})},t.prototype.clear=function(){var t=this;return this.traverse_nodes(this.nod,function(e){return t._clear_nod(e)})},t.prototype.process_name_values=function(t){var e,n,r,i,s,u,a=this;for(u={},n={},r=function(t){var e,r,i,s,l,c,p,h,_,f,d;if(i=t.name,l=t.value,!a.options.skip_empty||""!==l&&null!==l){for(c="",p=u,i=a.transform_name(i,!1),l=a.transform_value(l),f=i.split("."),r=f.length,d=[],e=h=0,_=f.length;_>h;e=++h)s=f[e],d.push(function(t){var i,s,u,a;return t.indexOf("[]")>-1?(s=t.substr(0,t.indexOf("[")),c+=s,p[s]||(p[s]=[]),e===r-1?p[s].push(l):(a=f[e+1],n[c]||(n[c]=[]),i=n[c].length,p[s].length>0&&(u=p[s][p[s].length-1]),(!i||o.call(n[c],a)>=0&&!(a.indexOf("[]")>-1||null==u[a]||e+1!==r-1))&&(u={},p[s].push(u),n[c]=[]),n[c].push(a),p=u)):(c+=t,r-1>e?(p[t]||(p[t]={}),p=p[t]):p[t]=l)}(s));return d}},i=0,s=t.length;s>i;i++)e=t[i],r(e);return u},t.prototype.collect_name_values=function(){var t=this;return this.traverse_nodes(this.nod,function(e){return t._parse_nod(e)})},t.prototype.traverse_nodes=function(t,e){var n,r;for(r=this._to_array(e(t)),n=t.firstChild;null!=n;)1===n.nodeType&&(r=r.concat(this.traverse_nodes(n,e))),n=n.nextSibling;return r},t.prototype.transform_name=function(t,e){return null==e&&(e=!0),this.options.fill_prefix&&e&&(t=t.replace(this.options.fill_prefix,"")),null!=this.options.name_transform&&(t=this.options.name_transform(t)),t},t.prototype.transform_value=function(t){return null!=this.options.parse_value?this.options.parse_value(t):t},t.prototype._to_array=function(t){return null==t?[]:i.to_a(t)},t.prototype._parse_nod=function(t){var e;if((this.options.disabled!==!1||!t.disabled)&&/(input|select|textarea)/i.test(t.nodeName)&&t.name&&(e=this._parse_nod_value(t),null!=e))return{name:t.name,value:e}},t.prototype._fill_nod=function(t,e){var n,r;if(/(input|select|textarea)/i.test(t.nodeName)&&(r=this._nod_data_value(t.name,e),null!=r))if("select"===t.nodeName.toLowerCase())this._fill_select(t,r);else{if("object"==typeof r)return;switch(n=t.type.toLowerCase(),!1){case!(/(radio|checkbox)/.test(n)&&r):t.checked=!0;break;case!(/(radio|checkbox)/.test(n)&&!r):t.checked=!1;break;default:t.value=r}}},t.prototype._fill_select=function(t,e){var n,r,i,s,u;for(e=e instanceof Array?e:[e],e=e.map(function(t){return""+t}),s=t.getElementsByTagName("option"),u=[],r=0,i=s.length;i>r;r++)n=s[r],u.push(function(t){var n;return t.selected=(n=t.value,o.call(e,n)>=0)}(n));return u},t.prototype._clear_nod=function(t){var e;if(/(input|select|textarea)/i.test(t.nodeName))if("select"===t.nodeName.toLowerCase())this._fill_select(t,[]);else switch(e=t.type.toLowerCase(),!1){case!/(radio|checkbox)/.test(e):t.checked=!1;break;case!("hidden"===e&&!this.options.clear_hidden):break;default:t.value=""}},t.prototype._nod_data_value=function(t,e){var n,r,i,o;if(t&&(t=this.transform_name(t),!(t.indexOf("[]")>-1))){for(o=t.split("."),r=0,i=o.length;i>r&&(n=o[r],e=e[n],null!=e);r++);return e}},t.prototype._parse_nod_value=function(t){var e;if("select"===t.nodeName.toLowerCase())return this._parse_select_value(t);switch(e=t.type.toLowerCase(),!1){case!(/(radio|checkbox)/.test(e)&&t.checked):return t.value;case!(/(radio|checkbox)/.test(e)&&!t.checked):return null;case!/(button|reset|submit|image)/.test(e):return null;case!/(file)/.test(e):return this._parse_file_value(t);default:return t.value}},t.prototype._parse_file_value=function(t){var e;if(null!=(e=t.files)?e.length:void 0)return t.multiple?t.files:t.files[0]},t.prototype._parse_select_value=function(t){var e,n,r,i,o,s;if(e=t.multiple,!e)return t.value;for(o=t.getElementsByTagName("option"),s=[],r=0,i=o.length;i>r;r++)n=o[r],n.selected&&s.push(n.value);return s},t.prototype._rails_name_transform=function(t){return t.replace(/\[([^\]])/gi,".$1").replace(/([^\[])([\]]+)/gi,"$1")},t}(),n.exports=r}}),require.define({"pieces-core/core/index":function(t,e,n){"use strict";var r={},i={};r["export"]=function(t,e){window[e]&&!i[e]&&(i[e]=window[e]),window[e]=t},r.noconflict=function(){for(var t in i)i.hasOwnProperty(t)&&(window[t]=i[t])},r.config=e("./config");var o=r.utils=e("./utils");r["export"](o.curry,"curry"),r["export"](o.delayed,"delayed"),r["export"](o.after,"after"),r["export"](o.debounce,"debounce"),r["export"](o.throttle,"throttle"),r.Core=e("./core"),r.Events=e("./events");var s=e("./nod");r.Nod=s.Nod,o.extend(r.Events,s,!1,["Nod"]),r.Events.ResizeDelegate=e("./events/resize_delegate"),r.Events.NodEvent.register_delegate("resize",new r.Events.ResizeDelegate),e("./events/aliases"),n.exports=r}}),require.define({"pieces-core/core/nod":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,t,p,h,_,f,d,y,v,g,m,b,w,x,k,E,z,O,q,C,j,S,L,N,P,T,A,$,D={}.hasOwnProperty,I=function(t,e){function n(){this.constructor=t}for(var r in e)D.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},R=[].slice;for(p=e("./utils"),i=e("./events").EventDispatcher,r=e("./events").Event,t={},a=function(t){function e(t){this.event=t||window.event,this.origTarget=this.event.target||this.event.srcElement,this.target=u.create(this.origTarget),this.type=this.constructor.is_aliased(t.type)?this.constructor.reversed_aliases[t.type]:t.type,this.ctrlKey=this.event.ctrlKey,this.shiftKey=this.event.shiftKey,this.altKey=this.event.altKey,this.metaKey=this.event.metaKey,this.detail=this.event.detail,this.bubbles=this.event.bubbles}return I(e,t),e.aliases={},e.reversed_aliases={},e.delegates={},e.add=function(t,e,n){return t.addEventListener(e,n)},e.remove=function(t,e,n){return t.removeEventListener(e,n)},e.register_delegate=function(t,e){return this.delegates[t]=e},e.has_delegate=function(t){return!!this.delegates[t]},e.register_alias=function(t,e){return this.aliases[t]=e,this.reversed_aliases[e]=t},e.has_alias=function(t){return!!this.aliases[t]},e.is_aliased=function(t){return!!this.reversed_aliases[t]},e.prototype.stopPropagation=function(){return this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0},e.prototype.stopImmediatePropagation=function(){return this.event.stopImmediatePropagation?this.event.stopImmediatePropagation():(this.event.cancelBubble=!0,this.event.cancel=!0)},e.prototype.preventDefault=function(){return this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1},e.prototype.cancel=function(){return this.stopImmediatePropagation(),this.preventDefault(),e.__super__.cancel.apply(this,arguments)},e}(r),t.NodEvent=a,O=/(click|mouse|contextmenu)/i,k=/(keyup|keydown|keypress)/i,s=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.button=this.event.button,null==this.pageX&&(this.pageX=this.event.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.pageY=this.event.clientY+document.body.scrollTop+document.documentElement.scrollTop),null==this.offsetX&&(this.offsetX=this.event.layerX-this.origTarget.offsetLeft,this.offsetY=this.event.layerY-this.origTarget.offsetTop),this.wheelDelta=this.event.wheelDelta,null==this.wheelDelta&&(this.wheelDelta=40*-this.event.detail)}return I(e,t),e}(a),t.MouseEvent=s,o=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.keyCode=this.event.keyCode||this.event.which,this.charCode=this.event.charCode}return I(e,t),e}(a),t.KeyEvent=o,C=function(t){return O.test(t.type)?new s(t):k.test(t.type)?new o(t):new a(t)},T=/^[\.#]/,P=function(t,e){return T.test(t)?function(n){var r;if(e||(e=document),r=n.target.node,r.matches(t))return!0;if(r===e)return!1;for(;(r=r.parentNode)&&r!==e;)if(r.matches(t))return n.target=u.create(r)}:function(e){return e.target.node.matches(t)}},l=function(t){function e(){var t=this;e.__super__.constructor.apply(this,arguments),this.native_event_listener=function(e){return t.trigger(C(e))}}return I(e,t),e.prototype.listen=function(t,e,n,r){return this.on(e,n,r,P(t,this.node))},e.prototype.add_native_listener=function(t){return a.has_delegate(t)?a.delegates[t].add(this,this.native_event_listener):a.add(this.node,t,this.native_event_listener)},e.prototype.remove_native_listener=function(t){return a.has_delegate(t)?a.delegates[t].remove(this):a.remove(this.node,t,this.native_event_listener)},e.prototype.add_listener=function(t){return this.listeners[t.type]||this.add_native_listener(a.has_alias(t.type)?a.aliases[t.type]:t.type),e.__super__.add_listener.apply(this,arguments)},e.prototype.remove_type=function(t){return this.remove_native_listener(a.has_alias(t)?a.aliases[t]:t),e.__super__.remove_type.apply(this,arguments)},e.prototype.remove_all=function(){var t,n,r,i,o=this;i=this.listeners,r=function(){return o.remove_native_listener(a.has_alias(n)?a.aliases[n]:n)};for(n in i)D.call(i,n)&&(t=i[n],r());return e.__super__.remove_all.apply(this,arguments)},e}(i),t.NodEventDispatcher=l,j=function(t,e){return u.prototype[t]=function(t,n){var r,i;if("object"!=typeof t)return e.call(this,t,n);for(r in t)D.call(t,r)&&(i=t[r],e.call(this,r,i))}},b=function(t){var e,n,r,i;for(n=function(){var t;t=e,u.prototype[t]=function(e){var n=this;return void 0===e?this.node["offset"+p.capitalize(t)]:(this._with_raf(t,function(){return n.node.style[t]=e+"px","width"===t||"height"===t?n.trigger("resize"):void 0}),this)}},r=0,i=t.length;i>r;r++)e=t[r],n()},g=function(t){var e,n;for(n=document.createElement("div"),n.innerHTML=t,e=document.createDocumentFragment();n.firstChild;)e.appendChild(n.firstChild);return e},q=function(t){return t instanceof u?t.node:"string"==typeof t?g(t):t},f=/^data-\w[\w\-]*$/,m=function(t){var e;return e=t.split("-"),e.join("_")},d=function(){return"undefined"==typeof DOMStringMap?function(t){var e,n,r,i,o;if(n={},null!=t.attributes)for(o=t.attributes,r=0,i=o.length;i>r;r++)e=o[r],f.test(e.name)&&(n[m(e.name.slice(5))]=p.serialize(e.value));return n}:function(t){var e,n,r,i;e={},i=t.dataset;for(n in i)D.call(i,n)&&(r=i[n],e[p.snake_case(n)]=p.serialize(r));return e}}(),S=null!=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return p.after(0,t)},_=null!=window.cancelAnimationFrame?window.cancelAnimationFrame:p.pass,A={},u=function(t){function e(t){if(this.node=t,e.__super__.constructor.apply(this,arguments),null==this.node)throw Error("Node is undefined!");this._disposed=!1,this._data=d(this.node),e.store(this)}return I(e,t),e.store=function(t,e){var n;return null==e&&(e=!1),n=t.node,n._nod&&A[n._nod]&&!e?void 0:(n._nod=p.uid("nod"),A[n._nod]=t)},e.fetch=function(t){return t&&A[t]},e["delete"]=function(t){var e;return delete A[null!=(e=t.node)?e._nod:void 0]},e.create=function(t){switch(!1){case!!t:return null;case!(t instanceof this):return t;case!("undefined"!=typeof t._nod):return e.fetch(t._nod);case!p.is_html(t):return this._create_html(t);case"string"!=typeof t:return new this(document.createElement(t));default:return new this(t)}},e._create_html=function(t){var e,n;return n=g(t),e=n.firstChild,n.removeChild(e),new this(e)},e.prototype.find=function(t){return e.create(this.node.querySelector(t))},e.prototype.all=function(t){return this.node.querySelectorAll(t)},e.prototype.each=function(t,e){var n,r,i,o,s,u;for(n=0,s=this.node.querySelectorAll(t),u=[],i=0,o=s.length;o>i&&(r=s[i],e.call(null,r,n)!==!0);i++)u.push(n++);return u},e.prototype.first=function(t){return this.find(t)},e.prototype.last=function(t){return this.find(""+t+":last-child")},e.prototype.nth=function(t,e){return this.find(""+t+":nth-child("+e+")")},e.prototype.find_bf=function(t){var e,n,r,i;for(i=[],e=[],n=this.node.firstChild;n;)if(1===n.nodeType){if(n.matches(t))e.push(n),r=n.querySelector(t),null!=r&&i.push(r);else if(r=n.querySelector(t)){n.nextSibling&&i.unshift(n.nextSibling),n=r;continue}n=n.nextSibling||i.shift()}else n=n.nextSibling||i.shift();return e},e.prototype.find_cut=function(t){var e,n,r;for(r=[],e=[],n=this.node.firstChild;n;)1===n.nodeType?(n.matches(t)?e.push(n):n.firstChild&&r.unshift(n.firstChild),n=n.nextSibling||r.shift()):n=n.nextSibling||r.shift();return e},e.prototype.attrs=function(t){var e,n;for(e in t)D.call(t,e)&&(n=t[e],this.attr(e,n));return this},e.prototype.styles=function(t){var e,n;for(e in t)D.call(t,e)&&(n=t[e],this.style(e,n));return this},e.prototype.parent=function(t){var n;if(null==t)return null!=this.node.parentNode?e.create(this.node.parentNode):null;for(n=this.node;(n=n.parentNode)&&n!==document;)if(n.matches(t))return e.create(n);return null},e.prototype.children=function(t){var e,n,r,i,o;if(null!=t){for(i=this.node.children,o=[],n=0,r=i.length;r>n;n++)e=i[n],e.matches(t)&&o.push(e);return o}return this.node.children},e.prototype.wrap=function(){var t,n;return t=1<=arguments.length?R.call(arguments,0):[],n=e.create("div"),n.addClass.apply(n,t),this.node.parentNode.insertBefore(n.node,this.node),n.append(this.node)},e.prototype.prepend=function(t){return t=q(t),this.node.insertBefore(t,this.node.firstChild),this},e.prototype.append=function(t){return t=q(t),this.node.appendChild(t),this},e.prototype.insertBefore=function(t){return t=q(t),this.node.parentNode.insertBefore(t,this.node),this},e.prototype.insertAfter=function(t){return t=q(t),this.node.parentNode.insertBefore(t,this.node.nextSibling),this},e.prototype.detach=function(){var t;return null!=(t=this.node.parentNode)&&t.removeChild(this.node),this},e.prototype.detach_children=function(){for(;this.node.children.length;)this.node.removeChild(this.node.children[0]);return this},e.prototype.remove_children=function(){for(var t;this.node.firstChild;)(t=e.fetch(this.node.firstChild._nod))?t.remove():this.node.removeChild(this.node.firstChild);return this},e.prototype.remove=function(){return this.detach(),this.remove_children(),this.dispose(),null},e.prototype.empty=function(){return this.html(""),this},e.prototype.clone=function(){var t,n;return t=document.createElement(this.node.nameNode),t.innerHTML=this.node.outerHTML,n=new e(t.firstChild),p.extend(n,this,!0,["listeners","listeners_by_type","__components__","native_event_listener","node"])},e.prototype.dispose=function(){this._disposed||(this.off(),e["delete"](this),this._disposed=!0)},e.prototype.html=function(t){return null!=t?(this.node.innerHTML=t,this):this.node.innerHTML},e.prototype.outerHTML=function(t){return null!=t?(this.node.outerHTML=t,this):this.node.outerHTML},e.prototype.text=function(t){return null!=t?(this.node.textContent=t,this):this.node.textContent},e.prototype.name=function(){return this.node.name||this.data("name")},e.prototype.value=function(t){return null!=t?(this.node.value=t,this):this.node.value},e.prototype.addClass=function(){var t,e,n;for(e=0,n=arguments.length;n>e;e++)t=arguments[e],this.node.classList.add(t);return this},e.prototype.removeClass=function(){var t,e,n;for(e=0,n=arguments.length;n>e;e++)t=arguments[e],this.node.classList.remove(t);return this},e.prototype.toggleClass=function(t){return this.node.classList.toggle(t),this},e.prototype.hasClass=function(t){return this.node.classList.contains(t)},e.prototype.mergeClasses=function(t){var e,n,r,i;for(i=t.node.className.split(/\s+/),n=0,r=i.length;r>n;n++)e=i[n],e&&this.addClass(e);return this},e.prototype.x=function(){var t,e;for(e=this.node.offsetLeft,t=this.node;t=t.offsetParent;)e+=t.offsetLeft;return e},e.prototype.y=function(){var t,e;for(e=this.node.offsetTop,t=this.node;t=t.offsetParent;)e+=t.offsetTop;return e},e.prototype._with_raf=function(t,e){return this["__"+t+"_rid"]&&(_(this["__"+t+"_rid"]),delete this["__"+t+"_rid"]),this["__"+t+"_rid"]=S(e)},e.prototype.move=function(t,e){var n=this;return this._with_raf("move",function(){return n.style({left:""+t+"px",top:""+e+"px"})})},e.prototype.moveX=function(t){return this.left(t)},e.prototype.moveY=function(t){return this.top(t)},e.prototype.scrollX=function(t){var e=this;return this._with_raf("scrollX",function(){return e.node.scrollLeft=t})},e.prototype.scrollY=function(t){var e=this;return this._with_raf("scrollY",function(){return e.node.scrollTop=t})},e.prototype.position=function(){return{x:this.x(),y:this.y()}},e.prototype.offset=function(){return{x:this.node.offsetLeft,y:this.node.offsetTop}},e.prototype.size=function(t,e){var n=this;return null==t&&(t=null),null==e&&(e=null),null==t||null==e?{width:this.width(),height:this.height()}:(null==t&&(t=this.width()),null==e&&(e=this.height()),void this._with_raf("size",function(){return n.node.style.width=t+"px",n.node.style.height=e+"px",n.trigger("resize")}))},e.prototype.show=function(){return this.node.style.display="block"},e.prototype.hide=function(){return this.node.style.display="none"},e.prototype.focus=function(){return this.node.focus(),this},e.prototype.blur=function(){return this.node.blur(),this},e}(l),j("data",function(t,e){return void 0===t?this._data:(t=t.replace("-","_"),null===e?(e=this._data[t],delete this._data[t],e):void 0===e?this._data[t]:(this._data[t]=e,this))}),j("style",function(t,e){if(null===e)this.node.style[t]=null;else if(void 0===e)return this.node.style[t];return this.node.style[t]=e}),j("attr",function(t,e){return null===e?this.node.removeAttribute(t):void 0===e?this.node.getAttribute(t):this.node.setAttribute(t,e)}),b(["top","left","width","height"]),L=["width","height"],y=function(){var t;return t="client"+p.capitalize(c),u.prototype[t]=function(){return this.node[t]}},w=0,E=L.length;E>w;w++)c=L[w],y();for(N=["top","left","width","height"],v=function(){var t;return t="scroll"+p.capitalize(c),u.prototype[t]=function(){return this.node[t]}},x=0,z=N.length;z>x;x++)c=N[x],v();t.Nod=u,u.Root=function(t){function e(){if(u.Root.instance)throw"Nod.Root is already defined!";u.Root.instance=this,e.__super__.constructor.call(this,document.documentElement)}return I(e,t),e.instance=null,e.prototype.initialize=function(){var t,e,n,r=this;if(n=document.attachEvent?"complete":"interactive",this._loaded="complete"===document.readyState,this._loaded||(this._loaded_callbacks=[],t=function(){return p.debug("DOM loaded"),r._loaded=!0,r.fire_all(),a.remove(window,"load",t)},a.add(window,"load",t)),!this._ready){if(document.addEventListener){if(this._ready=document.readyState===n,this._ready)return;return this._ready_callbacks=[],e=function(){return p.debug("DOM ready"),r._ready=!0,r.fire_ready(),document.removeEventListener("DOMContentLoaded",e)},document.addEventListener("DOMContentLoaded",e)}if(this._ready=document.readyState===n,this._ready)return;return this._ready_callbacks=[],e=function(){return document.readyState===n?(p.debug("DOM ready"),r._ready=!0,r.fire_ready(),document.detachEvent("onreadystatechange",e)):void 0},document.attachEvent("onreadystatechange",e)}},e.prototype.ready=function(t){return this._ready?t.call(null):this._ready_callbacks.push(t)},e.prototype.loaded=function(t){return this._loaded?t.call(null):this._loaded_callbacks.push(t)},e.prototype.fire_all=function(){var t;for(this._ready_callbacks&&this.fire_ready();t=this._loaded_callbacks.shift();)t.call(null);return this._loaded_callbacks=null},e.prototype.fire_ready=function(){for(var t;t=this._ready_callbacks.shift();)t.call(null);return this._ready_callbacks=null},e.prototype.scrollTop=function(){return this.node.scrollTop||document.body.scrollTop},e.prototype.scrollLeft=function(){return this.node.scrollLeft||document.body.scrollLeft},e.prototype.scrollHeight=function(){return this.node.scrollHeight},e.prototype.scrollWidth=function(){return this.node.scrollWidth},e.prototype.height=function(){return window.innerHeight||this.node.clientHeight},e.prototype.width=function(){return window.innerWidth||this.node.clientWidth},e}(u),u.Win=function(t){function e(){if(u.Win.instance)throw"Nod.Win is already defined!";u.Win.instance=this,this.delegate_to(u.root,"scrollLeft","scrollTop","scrollWidth","scrollHeight"),e.__super__.constructor.call(this,window)}return I(e,t),e.instance=null,e.prototype.scrollY=function(t){var e,n=this;return e=this.scrollLeft(),this._with_raf("scrollY",function(){return n.node.scrollTo(e,t)})},e.prototype.scrollX=function(t){var e,n=this;return e=this.scrollTop(),this._with_raf("scrollX",function(){return n.node.scrollTo(t,e)})},e.prototype.width=function(){return this.node.innerWidth},e.prototype.height=function(){return this.node.innerHeight},e.prototype.x=function(){return 0},e.prototype.y=function(){return 0},e}(u),$=null,h=null,Object.defineProperties(u,{win:{get:function(){return $||($=new u.Win)}},body:{get:function(){return h||(h=new u(document.body))}}}),n.exports=t}}),require.define({"pieces-core/core/utils/arr":function(t,e,n){"use strict";var r,i,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};i=e("./base"),r=function(){function t(){}return t.sort=function(t,e){return t.sort(i.curry(i.keys_compare,[e],i,!0))},t.sort_by=function(t,e,n){return null==n&&(n="asc"),t.sort(i.curry(i.key_compare,[e,n],i,!0))},t.uniq=function(t){var e,n,r,i;for(n=[],r=0,i=t.length;i>r;r++)e=t[r],o.call(n,e)<0&&n.push(e);return n},t.shuffle=function(t){var e,n,r,o,s,u,a;for(r=t.length,o=Array(r),e=u=0,a=t.length;a>u;e=++u)s=t[e],n=i.random(0,e),e!==n&&(o[e]=o[n]),o[n]=t[e];return o},t.sample=function(t,e){var n;return null==e&&(e=1),n=t.length,1===e?t[i.random(n-1)]:this.shuffle(t).slice(0,+(e-1)+1||9e9)},t}(),n.exports=r}}),require.define({"pieces-core/core/utils/base":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c={}.hasOwnProperty,p=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},h=[].slice;for(l=100,i=function(){function t(){}return t.email_rxp=/\b[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}\b/i,t.digital_rxp=/^[\d\s-\(\)]+$/,t.html_rxp=/^\s*<[\s\S]+>\s*$/m,t.esc_rxp=/[-[\]{}()*+?.,\\^$|#]/g,t.clickable_rxp=/^(a|button|input|textarea)$/i,t.input_rxp=/^(input|select|textarea)$/i,t.notsnake_rxp=/((?:^[^A-Z]|[A-Z])[^A-Z]*)/g,t.str_rxp=/(^'|'$)/g,t.html_entities={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},t.html_entities_rxp=/[&<>"']/g,t.uid=function(t){return(t||"")+ ++l},t.random=function(t,e){var n;return null==e&&(e=null),null==e&&(n=[t,0],e=n[0],t=n[1]),t+Math.random()*(e-t+1)|0},t.escapeRegexp=function(t){return t.replace(this.esc_rxp,"\\$&")},t.escapeHTML=function(t){var e=this;return t?(""+t).replace(this.html_entities_rxp,function(t){return e.html_entities[t]}):t},t.is_digital=function(t){return this.digital_rxp.test(t)},t.is_email=function(t){return this.email_rxp.test(t)},t.is_html=function(t){return this.html_rxp.test(t)},t.is_clickable=function(t){return this.clickable_rxp.test(t.nodeName)},t.is_input=function(t){return this.input_rxp.test(t.nodeName)},t.camelCase=function(t){var e;return t+="",t.length?function(){var n,r,i,o;for(i=t.split("_"),o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(this.capitalize(e));return o}.call(this).join(""):t},t.snake_case=function(t){var e,n;return t+="",t.length?(e=t.match(this.notsnake_rxp),function(){var t,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(n.toLowerCase());return i}().join("_")):t},t.capitalize=function(t){return t[0].toUpperCase()+t.slice(1)},t.serialize=function(t){return t=function(){switch(!1){case!(null==t):return null;case"null"!==t:return null;case"undefined"!==t:return void 0;case"true"!==t:return!0;case"false"!==t:return!1;case""!==t:return"";case!(isNaN(Number(t))&&"string"==typeof t):return(t+"").replace(this.str_rxp,"");case!isNaN(Number(t)):return t;default:return Number(t)}}.call(this)},t.squish=function(t){return(""+t).replace(/(^\s+|\s+$)/g,"").replace(/\s+/g," ")},t.key_compare=function(t,e,n,r){var i;return i="asc"===r,t=this.serialize(t[n]),e=this.serialize(e[n]),t===e?0:!t||e>t?1+-2*i:-(1+-2*i)},t.keys_compare=function(t,e,n){var r,i,o,s,u,a,l,p=this;for(s=0,a=0,l=n.length;l>a;a++){o=n[a],u=function(n,r){var i;return i=p.key_compare(t,e,n,r),0===s?s=i:void 0};for(r in o)c.call(o,r)&&(i=o[r],u(r,i))}return s},t.clone=function(t,e){var n,r,i;if(null==e&&(e=[]),null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return n="",null!=t.global&&(n+="g"),null!=t.ignoreCase&&(n+="i"),null!=t.multiline&&(n+="m"),null!=t.sticky&&(n+="y"),new RegExp(t.source,n);if(t instanceof Element)return t.cloneNode(!0);if("function"==typeof t.clone)return t.clone();i=new t.constructor;for(r in t)p.call(e,r)<0&&(i[r]=this.clone(t[r]));return i},t.merge=function(t,e){var n,r,i;r=this.clone(t);for(n in e)c.call(e,n)&&(i=e[n],r[n]=i);return r},t.extend=function(t,e,n,r){var i,o;null==n&&(n=!1),null==r&&(r=[]);for(i in e)c.call(e,i)&&(o=e[i],null!=t[i]&&!n||p.call(r,i)>=0||(t[i]=o));return t},t.extract_to=function(t,e,n){var r,i,o,s,u,a,l,p,h,_=this;if(null!=e){if(Array.isArray(e))for(u=function(e){var r;return r={},_.extract_to(r,e,n),t.push(r)},a=0,p=e.length;p>a;a++)r=e[a],u(r);else if("string"==typeof n)null!=e[n]&&(t[n]=e[n]);else if(Array.isArray(n))for(l=0,h=n.length;h>l;l++)o=n[l],this.extract_to(t,e,o);else for(i in n)if(c.call(n,i)){if(s=n[i],null==e[i])return;t[i]=Array.isArray(e[i])?[]:{},this.extract_to(t[i],e[i],s)}return t}},t.extract=function(t,e){var n;return n={},this.extract_to(n,t,e),n},t.subclass=function(t){var e,n;e=function(){return this.constructor.__super__.constructor.apply(this,arguments)};for(n in t)c.call(t,n)&&(e[n]=t[n]);return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__super__=t.prototype,e},t.to_a=function(t){return null==t?[]:Array.isArray(t)?t:[t]},t.debounce=function(e,n,r,i){var o,s;return null==i&&(i=!1),s=!1,o=null,function(){var u;return u=1<=arguments.length?h.call(arguments,0):[],s?void(o=u):((r||{}).__debounce_id__=t.after(e,function(){return s=!1,i&&null!=o&&n.apply(r,o),o=null}),s=!0,null==o?n.apply(r,u):void 0)}},t.throttle=function(e,n,r){return t.debounce(e,n,r,!0)},t.curry=function(e,n,r,i){return null==n&&(n=[]),null==i&&(i=!1),e="function"==typeof e?e:r[e],n=t.to_a(n),function(){var t;return t=1<=arguments.length?h.call(arguments,0):[],e.apply(r||this,i?t.concat(n):n.concat(t))}},t.delayed=function(e,n,r,i){return null==r&&(r=[]),function(){return setTimeout(t.curry(n,r,i),e)}},t.after=function(e,n,r){return t.delayed(e,n,[],r)()},t}(),a=[["truthy",!0],["falsey",!1],["null",null],["pass",void 0]],o=function(t){var e,n;return e=t[0],n=t[1],i[e]=function(){return n}},s=0,u=a.length;u>s;s++)r=a[s],o(r);n.exports=i}}),require.define({"pieces-core/core/utils/browser":function(t,e,n){"use strict";var r,i,o,s,u,a,l;u=/\bMac OS X ([\d\._]+)\b/,l=/\bWindows NT ([\d\.]+)\b/,o=/(iphone|ipod|ipad)/i,s=/\bcpu\s*(?:iphone\s+)?os ([\d\.\-_]+)\b/i,i=/\bandroid[\s\-]([\d\-\._]+)\b/i,a={6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP"},r=function(){function t(){}return t.scrollbar_width=function(){return this._scrollbar_width||(this._scrollbar_width=function(){var t,e,n;return t=document.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow="scroll",e.top="-9999px",document.body.appendChild(t),n=t.offsetWidth-t.clientWidth,document.body.removeChild(t),n}())},t.info=function(){return this._info||(this._info=null!=window.bowser?this._extend_info(window.bowser):this._extend_info()),this._info},t._extend_info=function(t){return null==t&&(t={}),t.os=this.os(),t},t.os=function(){return this._os||(this._os=function(){var t,e,n;return e={},n=window.navigator.userAgent,n.indexOf("Windows")>-1?(e.windows=!0,(t=l.exec(n))&&(e.version=a[t[1]])):n.indexOf("Macintosh")>-1?(e.macos=!0,
(t=u.exec(n))&&(e.version=t[1])):n.indexOf("X11")>-1?e.unix=!0:(t=o.exec(n))?(e[t[1]]=!0,(t=s.exec(n))&&(e.version=t[1])):n.indexOf("Android")>-1?(e.android=!0,(t=i.exec(n))&&(e.version=t[1])):n.indexOf("Tizen")>-1?e.tizen=!0:n.indexOf("Blackberry")>-1&&(e.blackberry=!0),e.version&&(e.version=e.version.replace(/(_|\-)/g,".")),e}())},t}(),n.exports=r}}),require.define({"pieces-core/core/utils/func":function(t,e,n){"use strict";var r,i,o=[].slice;i=e("./base"),r=function(){function t(){}return t.BREAK="__BREAK__",t.wrap=function(e,n,r,i){return null==i&&(i={}),function(){var s,u,a,l,c;if(u=1<=arguments.length?o.call(arguments,0):[],c=i["this"]||this,null!=n){if(a=n.apply(c,u),a&&i.break_if_value===!0)return a;if(a===t.BREAK)return i.break_with}return l=e.apply(c,u),null!=r&&(s=r.call(c,l,u,a)),l}},t.append=function(e,n,r){return null==r&&(r={}),t.wrap(e,null,n,r)},t.prepend=function(e,n,r){return null==r&&(r={}),t.wrap(e,n,null,r)},t.unwrap=function(t,e,n){return null==e&&(e={}),null==n&&(n=null),function(){return null!=e.debounce?i.debounce(e.debounce,t,n||this):null!=e.throttle?i.throttle(e.throttle,t,n||this):t.bind(n||this)}},t}(),n.exports=r}}),require.define({"pieces-core/core/utils/history":function(t,e,n){"use strict";var r;r=function(){function t(t){this.limit=null!=t?t:10,this._storage=[],this._position=-1}return t.prototype.push=function(t){return this._position<-1&&(this._storage.splice(this._storage.length+this._position+1,-this._position+1),this._position=-1),this._storage.push(t),this._storage.length>this.limit?this._storage.shift():void 0},t.prototype.prev=function(){return-this._position<this._storage.length?(this._position-=1,this._storage[this._storage.length+this._position]):void 0},t.prototype.next=function(){return this._position>-2?void 0:(this._position+=1,this._storage[this._storage.length+this._position])},t.prototype.size=function(){return this._storage.length},t.prototype.clear=function(){return this._storage.length=0,this._position=-1},t}(),n.exports=r}}),require.define({"pieces-core/core/utils/index":function(t,e,n){"use strict";var r=e("./base");r.arr=e("./arr"),r.obj=e("./obj"),r.promise=e("./promise"),r.func=e("./func"),r.browser=e("./browser"),r.time=e("./time"),e("./logger"),r.matchers=e("./matchers"),n.exports=r}}),require.define({"pieces-core/core/utils/logger":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c=[].slice;o=e("./base"),e("./browser"),e("./time"),r=o.browser.info(),u=r.msie?function(t,e){console.log("["+t+"]",e)}:window.mochaPhantomJS?function(t,e){}:function(t,e){console.log("%c "+o.time.now("%H:%M:%S:%L")+" ["+t+"]","color: "+a[t].color,e)},window.console&&window.console.log||(window.console={log:function(){}}),o.log_level||(o.log_level="info"),a={error:{color:"#dd0011",sort:4},debug:{color:"#009922",sort:0},debug_verbose:{color:"#eee",sort:-1},info:{color:"#1122ff",sort:1},warning:{color:"#ffaa33",sort:2}},l=function(t){return a[o.log_level].sort<=a[t].sort},o.log=function(){var t,e;return t=arguments[0],e=2<=arguments.length?c.call(arguments,1):[],l(t)&&u(t,e)};for(i in a)s=a[i],o[i]=o.curry(o.log,i);n.exports=o.log}}),require.define({"pieces-core/core/utils/matchers":function(t,e,n){"use strict";var r,i,o,s,u=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},a={}.hasOwnProperty;i=e("./base"),s={"?":function(t){return function(e){return u.call(t,e)>=0}},"?&":function(t){return function(e){var n,r,i;for(r=0,i=t.length;i>r;r++)if(n=t[r],!(u.call(e,n)>=0))return!1;return!0}},">":function(t){return function(e){return e>=t}},"<":function(t){return function(e){return t>=e}},"~":function(t){return"string"==typeof t&&(t=new RegExp(i.escapeRegexp(t))),function(e){return t.test(e)}}},o=/^([\w\d_]+)(\?&|>|<|~|\?)$/,r=function(){function t(){}return t.object=function(t,e){var n,r,i,o=this;null==e&&(e=!0),i=function(n,r){return null==r?t[n]=function(t){return!t}:"object"==typeof r?t[n]=o.object(r,e):"function"!=typeof r?t[n]=function(t){return r===t}:void 0};for(n in t)r=t[n],i(n,r);return function(r){var i,o;if(null==r)return!1;o=!1;for(n in t)if((i=t[n])(r[n])){if(o=!0,!e)return o}else if(e)return!1;return o}},t.nod=function(t){var e,n,r,i;return t.indexOf(":")>0?(i=t.split(":"),r=i[0],e=i[1],n=new RegExp(e,"i"),r=r.split(","),function(t){var e,i,o,s;for(i=0,o=r.length;o>i;i++)if(e=r[i],null!=(s=t.find(e))?s.text().match(n):void 0)return!0;return!1}):(n=new RegExp(t,"i"),function(t){return!!t.text().match(n)})},t.object_ext=function(t,e){var n,r,i,u;null==e&&(e=!0),r={};for(n in t)a.call(t,n)&&(u=t[n],null==u||"object"!=typeof u||Array.isArray(u)?(i=n.match(o))?r[i[1]]=s[i[2]](u):r[n]=u:r[n]=this.object_ext(u,e));return this.object(r,e)},t}(),n.exports=r}}),require.define({"pieces-core/core/utils/obj":function(t,e,n){"use strict";var r,i;i=e("./base"),r=function(){function t(){}return t.get_path=function(t,e){var n,r,i;for(r=e.split("."),i=t;r.length;){if(n=r.shift(),null==i[n])return;i=i[n]}return i},t.set_path=function(t,e,n){var r,i,o;for(i=e.split("."),o=t;i.length>1;)r=i.shift(),null==o[r]&&(o[r]={}),o=o[r];return o[i[0]]=n},t.get_class_path=function(t,e){return e=e.split(".").map(function(t){return i.camelCase(t)}).join("."),this.get_path(t,e)},t.set_class_path=function(t,e,n){return e=e.split(".").map(function(t){return i.camelCase(t)}).join("."),this.set_path(t,e,n)},t.wrap=function(t,e){var n;return n={},n[t]=e,n},t.from_arr=function(t){var e,n,r,i,o;for(e={},n=i=0,o=t.length;o>i;n=i+=2)r=t[n],e[t[n]]=t[n+1];return e},t}(),n.exports=r}}),require.define({"pieces-core/core/utils/promise":function(t,e,n){"use strict";var r,i;i=e("./base"),r=function(){function t(){}return t.resolved=function(t){return new Promise(function(e){return e(t)})},t.rejected=function(t){return new Promise(function(e,n){return n(t)})},t.delayed=function(t,e,n){return null==n&&(n=!1),new Promise(function(r,o){return i.after(t,function(){return n?o(e):r(e)})})},t.as=function(e){return t.is(e)?e:t.resolved(e)},t.is=function(t){return t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then},t}(),n.exports=r}}),require.define({"pieces-core/core/utils/time":function(t,e,n){"use strict";var r,i,o,s;s=/%[a-zA-Z]/g,o=function(t,e){var n;for(null==e&&(e=1),n=10;e;)n>t&&(t="0"+t),n*=10,e--;return t},i={H:function(t){return o(t.getHours())},k:function(t){return t.getHours()},I:function(t){return o(i.l(t))},l:function(t){var e;return e=t.getHours(),e>12?e-12:e},M:function(t){return o(t.getMinutes())},S:function(t){return o(t.getSeconds())},L:function(t){return o(t.getMilliseconds(),2)},z:function(t){var e,n;return e=t.getTimezoneOffset(),n=e>0?"-":"+",e=Math.abs(e),n+o(Math.floor(e/60))+":"+o(e%60)},Y:function(t){return t.getFullYear()},y:function(t){return(t.getFullYear()+"").slice(2)},m:function(t){return o(t.getMonth()+1)},d:function(t){return o(t.getDate())},e:function(t){return t.getDate()},P:function(t){return t.getHours()>11?"PM":"AM"},p:function(t){return i.P(t).toLowerCase()}},r=function(){function t(){}return t.add_formatter=function(t,e){return i[t]=e},t.parse=function(t){return"number"==typeof t&&4e9>t&&(t*=1e3),new Date(t)},t.now=function(t){return this.format(new Date,t)},t.format=function(t,e){return t=this.parse(t),null==e?t:e.replace(s,function(e){var n;return n=e.slice(1),i[n]?i[n](t):e})},t.duration=function(t,e,n){var r,i,s,u;return null==e&&(e=!1),null==n&&(n=!1),e&&(s=t%1e3,t=t/1e3|0),r=[],i=t/60|0,r.push(i/60|0),r.push(o(i%60)),r.push(o(t%60)),u=r.join(":"),null!=s&&n&&(u+="."+o(s,2)),u},t}(),n.exports=r}}),require.define({"pieces-core/grammar/compiler":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c=[].slice;o=e("./pi_grammar").parser,s=e("../core/utils"),u=function(t){return s.error("Function ["+t+"] was compiled with error"),!1},a={">":function(t,e){return t>e},"<":function(t,e){return e>t},"=":function(t,e){return t===e},bool:function(t){return!!t}},r=function(){function t(t,e){var n;this.target=null!=t?t:{},this.fun_str=e;try{this._parsed=o.parse(e)}catch(r){n=r,this._compiled=s.curry(r,[e])}}return t.prototype.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],this.apply(e,t)},t.prototype.apply=function(t,e){return this.call_ths=t||{},this.compiled().apply(this,e)},t.prototype.compiled=function(){return this._compiled||(this._compiled=this._compile_fun())},t.prototype._compile_fun=function(){var t=this;return function(){return t["_get_"+t._parsed.code](t._parsed)}},t.prototype._get_chain=function(t){var e,n,r,i;for(e=t.value[0],i=function(){var t;switch(e.name){case"this":return this.target;case"app":return pi.app;case"host":return this.target.host;case"view":return"function"==typeof(t=this.target).view?t.view():void 0;default:return this["_get_"+e.code](e,this.call_ths)||this["_get_"+e.code](e,window)}}.call(this),n=1;n<t.value.length;)r=t.value[n++],i=this["_get_"+r.code](r,i);return i},t.prototype._get_res=function(t,e){return null==e&&(e={}),e[t.name]||window.pi.resources[t.name]},t.prototype._get_prop=function(t,e){return e[t.name]},t.prototype._get_call=function(t,e){return e[t.name].apply(e,this._get_args(t.args))},t.prototype._get_args=function(t){var e,n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(this["_get_"+e.code](e));return i},t.prototype._get_if=function(t){var e,n;return e=t.cond.left,n=t.cond.right,e=this["_get_"+e.code](e),null!=n&&(n=this["_get_"+n.code](n)),a[t.cond.type](e,n)?this["_get_"+t.left.code](t.left):null!=t.right?this["_get_"+t.right.code](t.right):!1},t.prototype._get_simple=function(t){return t.value},t}(),i=function(){function t(){}return t.modifiers=[],t.process_modifiers=function(t){var e,n,r,i;for(i=this.modifiers,n=0,r=i.length;r>n;n++)e=i[n],t=e.call(null,t);return t},t.compile_fun=function(t,e){return t=this.process_modifiers(t),new r(e,t)},t.str_to_fun=t.compile_fun,t.str_to_event_handler=function(t,e){var n;return n=this.compile_fun(t,e),function(t){return n.call({e:t})}},t}(),l=function(t){return t.replace(/@(this|app|host|view)(\b)/g,"$1$2").replace(/@@/g,"pi.app.page.context.").replace(/@/g,"pi.app.view.")},i.modifiers.push(l),n.exports=i}}),require.define({"pieces-core/grammar/pi_grammar":function(t,e,n){var r=function(){function t(){this.yy={}}var e=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},n=[1,6],r=[1,16],i=[1,17],o=[1,11],s=[1,12],u=[1,13],a=[5,11,33],l=[2,2],c=[2,4],p=[1,21],h=[1,22],_=[1,23],f=[1,19],d=[5,11,21,28,29,30,32,33],y=[5,11,15,21,28,29,30,32,33],v=[2,12],g=[1,30],m=[19,20,24,25,26],b=[1,37],w=[2,22],x={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,group_e:6,ternary:7,simple_e:8,"(":9,object:10,")":11,method_chain:12,val:13,method:14,".":15,resource:16,key:17,args:18,RES:19,KEY:20,",":21,key_val:22,":":23,NUMBER:24,BOOL:25,STRING:26,op:27,EQL:28,MORE:29,LESS:30,cond:31,TIF:32,TELSE:33,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",9:"(",11:")",15:".",19:"RES",20:"KEY",21:",",23:":",24:"NUMBER",25:"BOOL",26:"STRING",28:"EQL",29:"MORE",30:"LESS",32:"TIF",33:"TELSE"},productions_:[0,[3,2],[4,1],[4,1],[4,1],[4,3],[6,3],[8,1],[8,1],[12,1],[12,3],[14,1],[14,1],[14,4],[16,4],[16,4],[16,1],[17,1],[18,3],[18,3],[18,1],[18,1],[18,0],[10,3],[10,1],[22,3],[13,1],[13,1],[13,1],[27,1],[27,1],[27,1],[31,3],[7,5],[7,5]],performAction:function(t,e,n,r,i,o,s){var u=o.length-1;switch(i){case 1:return o[u-1];case 2:case 3:case 4:case 9:case 11:case 24:this.$=o[u];break;case 5:this.$={code:"simple",value:k(o[u-1])};break;case 6:this.$=o[u-1];break;case 7:this.$={code:"chain",value:o[u]};break;case 8:this.$={code:"simple",value:o[u]};break;case 10:case 23:this.$=o[u-2].concat(o[u]);break;case 12:this.$=[{code:"prop",name:o[u]}];break;case 13:this.$=[{code:"call",name:o[u-3],args:o[u-1]}];break;case 14:this.$=[{code:"res",name:o[u-3]},{code:"call",name:"view",args:[{code:"simple",value:k(o[u-1])}]}];break;case 15:this.$=[{code:"res",name:o[u-3]},{code:"call",name:"get",args:[{code:"simple",value:o[u-1]}]}];break;case 16:this.$=[{code:"res",name:o[u]}];break;case 17:this.$=t;break;case 18:case 19:this.$=[o[u-2]].concat(o[u]);break;case 20:this.$=[o[u]];break;case 21:this.$=[{code:"simple",value:k(o[u])}];break;case 22:this.$=[];break;case 25:this.$=[o[u-2],o[u]];break;case 26:this.$=Number(t);break;case 27:this.$="true"==t;break;case 28:this.$=t.replace(/(^['"]|['"]$)/g,"");break;case 29:case 30:case 31:this.$=t.replace(/(^\s+|\s+$)/g,"");break;case 32:this.$={left:o[u-2],right:o[u],type:o[u-1]};break;case 33:this.$={code:"if",cond:o[u-4],left:o[u-2],right:o[u]};break;case 34:this.$={code:"if",cond:{left:o[u-4],type:"bool"},left:o[u-2],right:o[u]}}},table:[{3:1,4:2,6:3,7:4,8:5,9:n,12:8,13:9,14:10,16:14,17:15,19:r,20:i,24:o,25:s,26:u,31:7},{1:[3]},{5:[1,18]},e(a,l),e(a,[2,3]),e(a,c,{27:20,28:p,29:h,30:_,32:f}),{4:25,6:3,7:4,8:5,9:n,10:24,12:8,13:9,14:10,16:14,17:27,19:r,20:i,22:26,24:o,25:s,26:u,31:7},{32:[1,28]},e(d,[2,7]),e(d,[2,8]),e(d,[2,9],{15:[1,29]}),e(d,[2,26]),e(d,[2,27]),e(d,[2,28]),e(y,[2,11]),e(y,v,{9:g}),e(y,[2,16],{9:[1,31]}),e([5,9,11,15,21,23,28,29,30,32,33],[2,17]),{1:[2,1]},{4:32,6:3,7:4,8:5,9:n,12:8,13:9,14:10,16:14,17:15,19:r,20:i,24:o,25:s,26:u,31:7},{8:33,12:8,13:9,14:10,16:14,17:15,19:r,20:i,24:o,25:s,26:u},e(m,[2,29]),e(m,[2,30]),e(m,[2,31]),{11:[1,34]},{11:[1,35]},{11:[2,24],21:[1,36]},e([11,15,21,28,29,30,32],v,{9:g,23:b}),{4:38,6:3,7:4,8:5,9:n,12:8,13:9,14:10,16:14,17:15,19:r,20:i,24:o,25:s,26:u,31:7},{12:39,14:10,16:14,17:15,19:r,20:i},{4:43,6:41,7:4,8:42,9:n,10:44,11:w,12:8,13:9,14:10,16:14,17:27,18:40,19:r,20:i,22:26,24:o,25:s,26:u,31:7},{10:45,13:46,17:47,20:i,22:26,24:o,25:s,26:u},{33:[1,48]},{32:[2,32]},e(a,[2,5]),e([5,11,21,33],[2,6]),{10:49,17:47,20:i,22:26},{13:50,24:o,25:s,26:u},{33:[1,51]},e(d,[2,10]),{11:[1,52]},{11:l,21:[1,53]},{11:c,21:[1,54],27:20,28:p,29:h,30:_,32:f},{11:[2,20]},{11:[2,21]},{11:[1,55]},{11:[1,56]},{23:b},{4:57,6:3,7:4,8:5,9:n,12:8,13:9,14:10,16:14,17:15,19:r,20:i,24:o,25:s,26:u,31:7},{11:[2,23]},e([11,21],[2,25]),{4:58,6:3,7:4,8:5,9:n,12:8,13:9,14:10,16:14,17:15,19:r,20:i,24:o,25:s,26:u,31:7},e(y,[2,13]),{4:43,6:41,7:4,8:42,9:n,10:44,11:w,12:8,13:9,14:10,16:14,17:27,18:59,19:r,20:i,22:26,24:o,25:s,26:u,31:7},{4:43,6:41,7:4,8:42,9:n,10:44,11:w,12:8,13:9,14:10,16:14,17:27,18:60,19:r,20:i,22:26,24:o,25:s,26:u,31:7},e(y,[2,14]),e(y,[2,15]),e(a,[2,34]),e(a,[2,33]),{11:[2,18]},{11:[2,19]}],defaultActions:{18:[2,1],33:[2,32],43:[2,20],44:[2,21],49:[2,23],59:[2,18],60:[2,19]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){function e(){var t;return t=f.lex()||h,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,r=[0],i=[null],o=[],s=this.table,u="",a=0,l=0,c=0,p=2,h=1,_=o.slice.call(arguments,1),f=Object.create(this.lexer),d={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(d.yy[y]=this.yy[y]);f.setInput(t,d.yy),d.yy.lexer=f,d.yy.parser=this,"undefined"==typeof f.yylloc&&(f.yylloc={});var v=f.yylloc;o.push(v);var g=f.options&&f.options.ranges;this.parseError="function"==typeof d.yy.parseError?d.yy.parseError:Object.getPrototypeOf(this).parseError;for(var m,b,w,x,k,E,z,O,q,C={};;){if(w=r[r.length-1],this.defaultActions[w]?x=this.defaultActions[w]:((null===m||"undefined"==typeof m)&&(m=e()),x=s[w]&&s[w][m]),"undefined"==typeof x||!x.length||!x[0]){var j="";q=[];for(E in s[w])this.terminals_[E]&&E>p&&q.push("'"+this.terminals_[E]+"'");j=f.showPosition?"Parse error on line "+(a+1)+":\n"+f.showPosition()+"\nExpecting "+q.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(a+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(j,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:v,expected:q})}if(x[0]instanceof Array&&x.length>1)throw new Error("Parse Error: multiple actions possible at state: "+w+", token: "+m);switch(x[0]){case 1:r.push(m),i.push(f.yytext),o.push(f.yylloc),r.push(x[1]),m=null,b?(m=b,b=null):(l=f.yyleng,u=f.yytext,a=f.yylineno,v=f.yylloc,c>0&&c--);break;case 2:if(z=this.productions_[x[1]][1],C.$=i[i.length-z],C._$={first_line:o[o.length-(z||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(z||1)].first_column,last_column:o[o.length-1].last_column},g&&(C._$.range=[o[o.length-(z||1)].range[0],o[o.length-1].range[1]]),k=this.performAction.apply(C,[u,l,a,d.yy,x[1],i,o].concat(_)),"undefined"!=typeof k)return k;z&&(r=r.slice(0,-1*z*2),i=i.slice(0,-1*z),o=o.slice(0,-1*z)),r.push(this.productions_[x[1]][0]),i.push(C.$),o.push(C._$),O=s[r[r.length-2]][r[r.length-1]],r.push(O);break;case 3:return!0}}return!0}},k=function(t){for(var e={},n=0,r=t.length;r>n;n+=2)e[t[n]]=t[n+1];return e},E=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if(n=this._input.match(this.rules[i[o]]),n&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(t=this.test_match(n,i[o]),t!==!1)return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?(t=this.test_match(e,i[r]),t!==!1?t:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:break;case 1:return 24;case 2:return 33;case 3:return 23;case 4:return 32;case 5:return"?";case 6:return 21;case 7:return 9;case 8:return 11;case 9:return 26;case 10:return 26;case 11:return 25;case 12:return 19;case 13:return 20;case 14:return 15;case 15:return 28;case 16:return 29;case 17:return 30;case 18:return 5;case 19:return"INVALID"}},rules:[/^(?:\s\s+)/,/^(?:[0-9]+(\.[0-9]+)?\b)/,/^(?:\s+:\s+)/,/^(?::\s*)/,/^(?:\s+\?\s+)/,/^(?:\?)/,/^(?:,\s*)/,/^(?:\()/,/^(?:\))/,/^(?:"(\\"|[^\"])*")/,/^(?:'(\\'|[^\'])*')/,/^(?:(true|false))/,/^(?:[A-Z][\w\d]*)/,/^(?:\w[\w\d]*)/,/^(?:\.)/,/^(?:\s*=\s*)/,/^(?:\s*>\s*)/,/^(?:\s*<\s*)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],inclusive:!0}}};return t}();return x.lexer=E,t.prototype=x,x.Parser=t,new t}();"undefined"!=typeof e&&"undefined"!=typeof t&&(t.parser=r,t.Parser=r.Parser,t.parse=function(){return r.parse.apply(r,arguments)},t.main=function(n){n[1]||(console.log("Usage: "+n[0]+" FILE"),process.exit(1));var r=e("fs").readFileSync(e("path").normalize(n[1]),"utf8");return t.parser.parse(r)},"undefined"!=typeof n&&e.main===n&&t.main(process.argv.slice(1)))}}),require.define({"pieces-core/index":function(t,e,n){"use strict";var r=e("./core");r.Compiler=e("./grammar/compiler"),r.components=e("./components"),r["export"](r.components,"$c"),r.klass=e("./components/utils/klass"),r.renderers=e("./renderers"),r.Plugin=e("./plugins"),r.Net=e("./net"),r.resources=e("./resources"),r["export"](r.resources,"$r"),r.controllers=e("./controllers"),r.views=e("./views"),r.Initializer=e("./components/utils/initializer"),e("./controllers/initializer"),r.Guesser=e("./components/utils/guesser"),r.$=e("./components/utils/setup"),r["export"](r.$,"$");var i=e("./core/app");r.app=new i,n.exports=window.pi=r}}),require.define({"pieces-core/net/iframe.upload":function(t,e,n){"use strict";var r,i,o;i=e("../core/nod").Nod,o=e("../core/utils"),r=function(){function t(){}return t._build_iframe=function(t){var e;return e=i.create("iframe"),e.attrs({id:t,name:t,width:0,height:0,border:0}),e.styles({width:0,height:0,border:"none"}),e},t._build_input=function(t,e){var n;return n=i.create("input"),n.node.type="hidden",n.node.name=t,n.node.value=e,n},t._build_form=function(t,e,n,r,i){var o,s,u;for(t.attrs({target:e,action:r,method:i,enctype:"multipart/form-data",encoding:"multipart/form-data"}),s=0,u=n.length;u>s;s++)o=n[s],t.append(this._build_input(o.name,o.value));return t.append(this._build_input("__iframe__",e)),t},t.upload=function(t,e,n,r){var s=this;return new Promise(function(u){var a,l;return l="iframe_"+o.uid(),a=s._build_iframe(l),t=s._build_form(t,l,n,e,r),i.body.append(a),a.on("load",function(){var t;return"complete"===a.node.contentDocument.readyState?(t=a.node.contentDocument.getElementsByTagName("body")[0],o.after(500,function(){return a.remove()}),a.off(),u(t)):void 0}),t.node.submit()})},t}(),n.exports=r}}),require.define({"pieces-core/net/index":function(t,e,n){"use strict";n.exports=e("./net")}}),require.define({"pieces-core/net/net":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,p={}.hasOwnProperty;for(u=e("../core/utils"),r=e("./iframe.upload"),o=e("../core/nod").Nod,i=function(){function t(){}return t._prepare_response=function(t){var e,n;return n=t.getResponseHeader("Content-Type"),e=/json/.test(n)?JSON.parse(t.responseText):t.responseText,u.debug("XHR response",t.responseText),e},t._prepare_error=function(t){var e,n;return n=t.getResponseHeader("Content-Type"),e=/json/.test(n)?JSON.parse(t.responseText||'{"status":'+t.statusText+"}"):t.responseText||t.statusText},t._is_app_error=function(t){return t>=400&&500>t},t._is_success=function(t){return t>=200&&300>t||304===t},t._with_prefix=function(t,e){return t?""+t+"["+e+"]":e},t._to_params=function(t,e){var n,r,i,o,s,u;if(null==e&&(e=""),i=[],null==t)return i;if("object"!=typeof t)i.push({name:e,value:t});else if(t instanceof Date)i.push({name:e,value:t.getTime()});else if(t instanceof Array)for(e+="[]",s=0,u=t.length;u>s;s++)n=t[s],i=i.concat(this._to_params(n,e));else if(window.File&&(t instanceof File||t instanceof Blob))i.push({name:e,value:t});else for(r in t)p.call(t,r)&&(o=t[r],i=i.concat(this._to_params(o,this._with_prefix(e,r))));return i},t._data_to_query=function(t){var e,n,r,i,o;for(n=[],o=this._to_params(t),r=0,i=o.length;i>r;r++)e=o[r],n.push(""+e.name+"="+encodeURIComponent(e.value));return n.join("&")},t._data_to_form=window.FormData?function(e){var n,r,i,o,s;for(n=new FormData,s=t._to_params(e),i=0,o=s.length;o>i;i++)r=s[i],n.append(r.name,r.value);return n}:function(e){return t._data_to_query(e)},t.use_json=!0,t.headers=[],t.method_override=!1,t.request=function(t,e,n,r,i){var o=this;return null==r&&(r={}),new Promise(function(s,a){var l,c,h,_,f,d;h=i||new XMLHttpRequest,_=null!=r.json?r.json:o.use_json,d=u.merge(o.headers,r.headers||{}),"GET"===t?(c=o._data_to_query(n),c&&(e+=e.indexOf("?")<0?"?":"&",e+=""+c),n=null):(o.method_override===!0&&(n._method=t,d["X-HTTP-Method-Override"]=t,t="POST"),_?(d["Content-Type"]="application/json",null!=n&&(n=JSON.stringify(n))):n=o._data_to_form(n)),h.open(t,e,!0),h.withCredentials=!!r.withCredentials;for(l in d)p.call(d,l)&&(f=d[l],h.setRequestHeader(l,f));return d=null,"function"==typeof r.progress&&(h.upload.onprogress=function(t){return f=t.lengthComputable?100*t.loaded/t.total:0,r.progress(Math.round(f))}),h.onreadystatechange=function(){return 4===h.readyState?o._is_success(h.status)?s(o._prepare_response(h)):a(o._is_app_error(h.status)?Error(o._prepare_error(h)):Error("500 Internal Server Error")):void 0},h.onerror=function(){a(Error("Network Error"))},h.send(n)})},t.upload=function(t,e,n,r){var i;if(null==e&&(e={}),null==n&&(n={}),!this.XHR_UPLOAD)throw Error("File upload not supported");return i=n.method||"POST",n.json=!1,this.request(i,t,e,n,r)},t.iframe_upload=function(t,e,n,i){var s,u,a=this;if(null==n&&(n={}),null==i&&(i={}),s=null!=i.as_json?i.as_json:this.use_json,t instanceof o||(t=o.create(t)),null==t)throw Error("Form is undefined");return u=i.method||"POST",new Promise(function(i,o){return r.upload(t,e,a._to_params(n),u).then(function(t){var e;return null==t&&o(Error("Response is empty")),s||i(t.innerHtml),t=function(){try{return JSON.parse(t.innerHTML)}catch(n){return e=n,JSON.parse(t.innerText)}}(),i(t)})["catch"](function(t){return o(t)})})},t}.call(this),i.XHR_UPLOAD=!!window.FormData,i.IframeUpload=r,c=["get","post","patch","put","delete"],a=0,l=c.length;l>a;a++)s=c[a],i[s]=u.curry(i.request,[s.toUpperCase()],i);n.exports=i}}),require.define({"pieces-core/plugins/base/index":function(t,e,n){"use strict";e("./selectable"),e("./renderable"),e("./restful")}}),require.define({"pieces-core/plugins/base/renderable":function(t,e,n){"use strict";var r,i,o,s,u,a,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("../../components/base"),i=e("../plugin"),s=e("../../core/utils"),o=e("../../renderers"),a=/(\w+)(?:\(([\w\-\/]+)\))?/,r.Renderable=function(t){function e(){return u=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.id="renderable",e.included=function(t){var e;return e=this,t.before_initialize(function(){return this.attach_plugin(e)})},e.prototype.initialize=function(t){return this.target=t,e.__super__.initialize.apply(this,arguments),this.target._renderer=this.find_renderer(),this.target.delegate_to(this,"render"),this},e.prototype.render=function(t){var e;return this.target.remove_children(),null!=t&&(e=this.target._renderer.render(t,!1),null!=e?(this.target.append(e),this.target.piecify(this.target)):s.error("failed to render data for: "+this.target.pid+"}",t)),this.target},e.prototype.find_renderer=function(){var t,e,n,r,i,u,l;if(null!=this.target.options.renderer&&a.test(this.target.options.renderer)){if(l=this.target.options.renderer.match(a),u=l[0],e=l[1],n=l[2],t=o[s.camelCase(e)],null!=t)return new t(n)}else if(i=this.target.find(".pi-renderer"))return r=new o.Simple(i),i.remove(),r;return new o.Base},e}(i),n.exports=r.Renderable}}),require.define({"pieces-core/plugins/base/restful":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("../../components/base"),o=e("../plugin"),a=e("../../core/utils"),s=e("./renderable"),i=e("../../grammar/compiler"),u=e("../../resources/events"),a=e("../../core/utils"),r.Restful=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.id="restful",e.prototype.initialize=function(t){var n,r,o,u=this;return this.target=t,e.__super__.initialize.apply(this,arguments),this._uid=a.uid("r"),this.target.has_renderable||this.target.attach_plugin(s),null!=(o=this.target.options.rest)&&(n=i.str_to_fun(o),r=n.call(this),r instanceof Promise||(r=r?a.promise.resolved(r):a.promise.rejected()),r.then(function(t){return u.bind(t,0===u.target.children().length)},function(){return a.error("resource not found: "+o,u.target.options.rest)})),this},e.prototype.bind=function(t,e){return null==e&&(e=!1),this.resource&&(this.resource.off(u.Update,this.resource_update()),this.resource.off(u.Create,this.resource_update())),this.resource=t,this.resource?(this.resource.on([u.Update,u.Create],this.resource_update()),e?this.target.render(t):void 0):void this.target.render(null)},e.prototype.resource_update=function(t){return a.debug_verbose("Restful component event",t),this.on_update(t.currentTarget)},e.event_handler("resource_update"),e.prototype.on_update=function(t){return this.target.render(t)},e.prototype.dispose=function(){return this.bind(null)},e}(o),n.exports=r.Restful}}),require.define({"pieces-core/plugins/base/selectable":function(t,e,n){"use strict";var r,i,o,s,u,a,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("../../components/base"),o=e("../../components/utils/klass"),i=e("../../components/events"),s=e("../plugin"),u=e("../../core/utils"),r.Selectable=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments);

}return c(e,t),e.prototype.id="selectable",e.prototype.initialize=function(t){return this.target=t,e.__super__.initialize.apply(this,arguments),r.active_property(this.target,"selected",{type:"bool","default":this.target.hasClass(o.SELECTED),event:i.Selected,"class":o.SELECTED,functions:["select","deselect"],toggle_select:"toggle_select"}),this.target.on("click",this.click_handler()),this},e.prototype.click_handler=function(t){return this.target.enabled?(this.toggle_select(),!1):void 0},e.event_handler("click_handler"),e}(s),n.exports=r.Selectable}}),require.define({"pieces-core/plugins/index":function(t,e,n){"use strict";var r=e("./plugin");e("./base"),n.exports=r}}),require.define({"pieces-core/plugins/plugin":function(t,e,n){"use strict";var r,i,o,s,u={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("../core/core"),o=e("../core/utils"),i=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.id="",e.included=function(t){var e;return e=this,t.after_initialize(function(){return this.attach_plugin(e)})},e.attached=function(t){return(new this).initialize(t)},e.prototype.initialize=function(t){return t[this.id]=this,t["has_"+this.id]=!0,t.addClass("has-"+this.id),this},e.prototype.dispose=o.truthy,e}(r),n.exports=i}}),require.define({"pieces-core/renderers/base":function(t,e,n){"use strict";var r,i,o,s;o=e("../core/nod").Nod,s=e("../core/utils"),i=e("../components/base"),r=function(){function t(){}return t.prototype.render=function(t,e,n){return t instanceof o?this._render(t,t.data(),e,n):void 0},t.prototype._render=function(t,e,n,r){return null==n&&(n=!0),t instanceof i||n&&(t=t.piecify(r)),t.record=e,t},t}(),n.exports=r}}),require.define({"pieces-core/renderers/index":function(t,e,n){"use strict";var r={};r.Base=e("./base"),r.Simple=e("./simple"),n.exports=r}}),require.define({"pieces-core/renderers/simple":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,p={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var r in e)p.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("../core/nod").Nod,s=e("../core/utils"),r=e("./base"),l=/\{\>\s*([^\}]+?)\s*\}[\s\S]+?\{\<\s*\1\s*\}/g,c=/\{\{([\s\S]+?)\}\}|\{\?([\s\S]+?)\?\}|\{\!([\s\S]+?)\!\}|$/g,u=/\\|'|\r|\n|\t|\u2028|\u2029/g,a={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},o=function(t){function e(t){this.create_templater(t.html())}return h(e,t),e.prototype.create_templater=function(t){var e,n;n=this._funstr(t,n);try{this.templater=new Function("__obj",n)}catch(r){throw e=r,e.source=n,e}},e.prototype.escape=function(t){return t?t.replace(u,function(t){return"\\"+a[t]}):t},e.prototype.to_hash=function(t){return t.split("").reduce(function(t,e){return t=(t<<5)-t+e.charCodeAt(0),t&t},0)},e.prototype.parse_conditional=function(t){var e,n;return n="",e=0,t.replace(/(['"][^'"]*['"])|$/g,function(r,i,o){return n+=t.slice(e,o).replace(/\b([a-zA-Z][\w\(\)]*)\b/g,"__obj.$&"),e=o+r.length,i&&(n+=i),r}),n},e.prototype.render=function(t,n,r){var o;return t instanceof i?e.__super__.render.apply(this,arguments):(o=i.create(s.squish(this.templater(t))),this._render(o,t,n,r))},e.prototype._funstr=function(t){var e,n,r,i=this;return e=this.to_hash(t),n=0,r="",t=t.replace(l,function(t){var e,n,o,u,a,l;return l=t.match(/^\{\>\s*(\w+)\s*\}([\s\S]*)\{\<\s*\w+\s*\}$/),a=l[0],o=l[1],e=l[2],u=i._funstr(e.trim()),n="_"+o+"_"+s.uid("partial"),r+="\nfunction "+n+"(__obj, $parent, $i, $key, $val){"+u+"};\n","{!\n  __ref = __obj."+o+"\n  if(Array.isArray(__ref)){\n    for(var i=0, len=__ref.length;i<len;i++){\n      __p+="+n+"(__ref[i], __obj, i, null, __ref[i]);\n    }\n  }else if(typeof __ref === 'object' && __ref){\n    for(var k in __ref){\n      if(!__ref.hasOwnProperty(k)) continue;\n      __p+="+n+"(__ref[k], __obj, null, k, __ref[k]);\n    }\n  }else if(__ref){\n    __p+="+n+"(__obj);\n  }\n!}"}),r+="\n__p+='",t.replace(c,function(e,o,u,a,l){var c,p,h,_,f;return r+=i.escape(t.slice(n,l)),o&&(f=o.match(/^(\=)?\s*([\s\S]+?)\s*$/),_=f[0],c=f[1],h=f[2],p=h.match(/^\$(i|key|val|parent)/)?"":"__obj.",o=p+h,r+=c?"'+(((__t = "+o+") == void 0) ? '' : __t)+'":"'+(((__t = pi.utils.escapeHTML("+o+")) == void 0) ? '' : __t)+'"),u&&(u=u.indexOf(":")>0?u:u+" : ''",u=s.squish(u),r+="'+(((__t = "+i.parse_conditional(u)+") == void 0) ? '' : __t)+'"),a&&(r+="';\n"+a+";\n__p+='"),n=l+e.length,e}),r+="';",r="var __ref,__t,__p='';__obj = __obj || {};\n"+r+"\nreturn __p;\n//# sourceURL=/simpletemplates/source_"+e+'";\n'},e}(r),n.exports=o}}),require.define({"pieces-core/resources/association":function(t,e,n){"use strict";var r,i,o,s,u,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("./base"),s=e("./view"),o=e("./events"),u=e("../core/utils"),r=function(t){function e(t,n,r){var i=this;this.resources=t,this.options=null!=r?r:{},e.__super__.constructor.apply(this,arguments),this._only_update=!1,this.owner=this.options.owner,r.belongs_to===!0?r.owner._persisted?this.owner_name_id=this.options.key:(this._only_update=!0,this.options.owner.one(o.Create,function(){var t,e,n,r,o;for(i._only_update=!1,i.owner=i.options.owner,i.owner_name_id=i.options.key,r=i.__all__,e=0,n=r.length;n>e;e++)t=r[e],t.set(u.obj.wrap(i.owner_name_id,i.owner.id),!0);return i.options._scope!==!1?(i.options.scope=null!=(null!=(o=i.options._scope)?o[i.options.key]:void 0)?u.merge(i.options._scope,u.obj.wrap(i.options.key,i.owner.id)):u.obj.wrap(i.options.key,i.owner.id),i.reload()):void 0})):this.options.scope||(this._only_update=!0)}return l(e,t),e.prototype.clear_all=function(){return this.options.route&&(this.owner[""+this.options.name+"_loaded"]=!1),e.__super__.clear_all.apply(this,arguments)},e.prototype.reload=function(){return this.clear_all(),this.options.scope?(this._filter=u.matchers.object_ext(this.options.scope),this.load(this.options.source.where(this.options.scope))):void 0},e.prototype.build=function(t,n,r){return null==t&&(t={}),null==n&&(n=!1),null==r&&(r={}),this.options.belongs_to===!0&&(null==t[this.owner_name_id]&&(t[this.owner_name_id]=this.owner.id),t instanceof i||(t=this.resources.build(t,!1))),e.__super__.build.call(this,t,n,r)},e.prototype.on_update=function(t){return this.get(t.id)?this.options.copy===!1?this.trigger(o.Update,this._wrap(t)):e.__super__.on_update.apply(this,arguments):this._only_update===!1?this.build(t):void 0},e.prototype.on_destroy=function(t){return this.options.copy===!1?(this.trigger(o.Destroy,this._wrap(t)),this.remove(t,!0,!1)):e.__super__.on_destroy.apply(this,arguments)},e.prototype.on_create=function(t){var e;return(e=this.get(t.id)||this.get(t.__tid__))?(this.created(e,t.__tid__),this.options.copy===!1?this.trigger(o.Create,this._wrap(t)):e.set(t.attributes())):this._only_update?void 0:this.build(t)},e.prototype.on_load=function(){return this._only_update?void 0:this.options.scope?(this.load(this.resources.where(this.options.scope)),this.trigger(o.Load,{})):void 0},e}(s),u.extend(i,{view:function(t){var e;return e=new r(this,t,{scope:t,copy:!1,source:this}),e.reload(),e}}),n.exports=r}}),require.define({"pieces-core/resources/base":function(t,e,n){"use strict";var r,i,o,s,u,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var r in e)a.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};i=e("../core/events").EventDispatcher,s=e("../core/utils"),o=e("./events"),u=function(t){return t.replace(/s$/,"")},r=function(t){function e(t){null==t&&(t={}),e.__super__.constructor.apply(this,arguments),this._snapshot=t,this.changes={},null==t.id||t.__temp__||(this._persisted=!0),this.initialize(t)}return l(e,t),e.set_resource=function(t,e){return this.__all_by_id__={},this.__all_by_tid__={},this.__all__=[],this.resources_name=t,this.resource_name=e||u(t)},e.register_association=function(t){return this.prototype.__associations__=null!=this.prototype.__associations__?this.prototype.__associations__.slice():[],this.prototype.__associations__.push(t)},e.load=function(t,e){var n,r;return null==e&&(e=!1),null!=t?(r=function(){var e,r,i;for(i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(this.build(n,!0));return i}.call(this),e||this.trigger(o.Load,{}),r):void 0},e.from_data=function(t){return null!=t[this.resource_name]&&(t[this.resource_name]=this.build(t[this.resource_name])),null!=t[this.resources_name]?t[this.resources_name]=this.load(t[this.resources_name]):void 0},e.clear_all=function(){var t,e,n,r;for(r=this.__all__,e=0,n=r.length;n>e;e++)t=r[e],t.dispose();return this.__all_by_id__={},this.__all_by_tid__={},this.__all__.length=0},e.get=function(t){return this.__all_by_id__[t]||this.__all_by_tid__[t]},e.get_by=function(t){var e,n,r,i;if(null!=t){for(i=this.__all__,n=0,r=i.length;r>n;n++)if(e=i[n],s.matchers.object_ext(t)(e))return e;return null}},e.add=function(t){return this.get(t.id)?void 0:(t.__temp__===!0?this.__all_by_tid__[t.id]=t:this.__all_by_id__[t.id]=t,this.__all__.push(t))},e.build=function(t,e,n){var r;return null==t&&(t={}),null==e&&(e=!1),null==n&&(n=!0),t.id&&(r=this.get(t.id))?r.set(t,e):(t.id||(t.id="tid_"+s.uid(),t.__temp__=!0),r=new this(t),n&&(this.add(r),e||r.__temp__||this.trigger(o.Create,this._wrap(r))),r)},e.created=function(t,e){return this.__all_by_tid__[e]?(delete this.__all_by_tid__[e],this.__all_by_id__[t.id]=t):void 0},e.clear_temp=function(t){var e,n,r;null==t&&(t=!1),r=this.__all_by_tid__;for(n in r)a.call(r,n)&&(e=r[n],this.remove(e,t));return this.__all_by_tid__={}},e.remove_by_id=function(t,e){var n;return n=this.get(t),null!=n&&this.remove(n),!1},e.remove=function(t,e,n){return null==n&&(n=!0),null!=this.__all_by_id__[t.id]?delete this.__all_by_id__[t.id]:delete this.__all_by_tid__[t.id],this.__all__.splice(this.__all__.indexOf(t),1),e||this.trigger(o.Destroy,this._wrap(t)),n&&t.dispose(),!0},e.listen=function(t,e){return i.Global.on(""+this.resources_name+"_update",t,null,e)},e.trigger=function(t,e,n){return e.type=t,e.changes=n,i.Global.trigger(""+this.resources_name+"_update",e,!1)},e.off=function(t){return null!=t?i.Global.off(""+this.resources_name+"_update",t):i.Global.off(""+this.resources_name+"_update")},e.all=function(){return this.__all__.slice()},e.first=function(){return this.__all__[0]},e.second=function(){return this.__all__[1]},e.where=function(t){var e,n,r,i,o;for(i=this.__all__,o=[],n=0,r=i.length;r>n;n++)e=i[n],s.matchers.object_ext(t)(e)&&o.push(e);return o},e._wrap=function(t){return t instanceof e?s.obj.wrap(t.constructor.resource_name,t):t},e.prototype.initialize=function(t){return this._initialized?void 0:(this.set(t,!0),this._initialized=!0)},e.register_callback("initialize"),e.prototype.created=function(t){return this.commit(),this.constructor.created(this,t),this},e.prototype.commit=function(){var t,e,n,r,i;for(i=this.changes,e=n=0,r=i.length;r>n;e=++n)t=i[e],this._snapshot[t]=e[1];return this.changes={},this._snapshot},e.prototype.dispose=function(){var t,e;if(!this.disposed){for(t in this)a.call(this,t)&&(e=this[t],delete this[t]);return this.disposed=!0,this}},e.register_callback("dispose",{as:"destroy"}),e.prototype.remove=function(t){return null==t&&(t=!1),this.constructor.remove(this,t)},e.prototype.attributes=function(){var t,e,n,r;e={},r=this._snapshot;for(t in r)n=r[t],e[t]=this.changes[t]?this.changes[t][1]:n;return e},e.prototype.association=function(t){var e;return(null!=(e=this.__associations__)?e.indexOf(t):void 0)>-1},e.prototype.set=function(t,e){var n,r,i,s,u,l;s=!1,l=!(!this.id||this.__temp__===!0),u=this.id;for(n in t)a.call(t,n)&&(i=t[n],this[n]===i||"function"==typeof this[n]||null!=this.__associations__&&c.call(this.__associations__,n)>=0||(s=!0,this.changes[n]=[this[n],i],this[n]=i));return 0|this.id&&!l?(delete this.__temp__,this._persisted=!0,this.__tid__=u,r=o.Create,this.created(u)):r=o.Update,s&&!e&&this.trigger(r,r===o.Create?this:this.changes),this},e.register_callback("set",{as:"update"}),e.prototype.trigger=function(t,n,r){return null==r&&(r=!1),e.__super__.trigger.apply(this,arguments),this.constructor.trigger(t,this.constructor._wrap(this),n)},e.prototype.trigger_assoc_event=function(t,e,n){return"function"==typeof this["on_"+t+"_update"]&&this["on_"+t+"_update"].call(this,e,n),this.trigger(o.Update,s.obj.wrap(t,!0))},e}(i),r.Event=o,n.exports=r}}),require.define({"pieces-core/resources/events":function(t,e,n){"use strict";var r;r={Update:"update",Create:"create",Destroy:"destroy",Load:"load"},n.exports=r}}),require.define({"pieces-core/resources/index":function(t,e,n){"use strict";var r=e("../core/utils"),i={};i.Base=e("./base"),i.View=e("./view"),i.Association=e("./association"),i.REST=e("./rest"),r.extend(i,e("./modules")),n.exports=i}}),require.define({"pieces-core/resources/modules/has_many":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("../../core/core"),u=e("../events"),a=e("../../core/utils"),r=e("../association"),i=e("../base"),s=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return p(e,t),e.has_many=function(t,e){var n,o;if(null==e)throw Error("Has many require at least 'source' param");return a.extend(e,{path:":resources/:id/"+t,method:"get"}),this.register_association(t),"function"==typeof e.update_if?o=e.update_if:e.update_if===!0&&(o=a.truthy),this.prototype[t]=function(){var n,i,s=this;return null==this["__"+t+"__"]&&(i={name:t,owner:this},e.belongs_to===!0&&(i.key=e.key||""+this.constructor.resource_name+"_id",null==e.copy&&(i.copy=!1),i._scope=e.scope,n=a.obj.wrap(i.key,this.id),i.scope=null==e.scope?this._persisted?n:!1:e.scope,null!=e.params&&e.params.push(""+this.constructor.resource_name+"_id")),a.extend(i,e),this["__"+t+"__"]=new r(e.source,i.scope,i),i.scope!==!1&&this["__"+t+"__"].load(e.source.where(i.scope)),e.update_if&&this["__"+t+"__"].listen(function(n){var r;return r=n.data[e.source.resources_name]||n.data[e.source.resource_name],o(n.data.type,r)?s.trigger_assoc_event(t,n.data.type,r):void 0})),this["__"+t+"__"]},e.route===!0&&(this.routes({member:[{action:"load_"+t,path:e.path,method:e.method}]}),this.prototype["on_load_"+t]=function(e){return this[""+t+"_loaded"]=!0,null!=e[t]?this[t]().load(e[t]):void 0}),this.after_update(function(e){return e instanceof i?void 0:e[t]?(this[""+t+"_loaded"]=!0,this[t]().load(e[t])):void 0}),this.after_initialize(function(){return this[t]()}),e.destroy===!0&&this.before_destroy(function(){return this[t]().clear_all(!0)}),e.attribute===!0?(n=this.prototype.attributes,this.prototype.attributes=function(){var e;return e=n.call(this),e[t]=this[t]().serialize(),e}):void 0},e}(o),n.exports=s}}),require.define({"pieces-core/resources/modules/has_one":function(t,e,n){"use strict";var r,i,o,s,u,a,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("../../core/core"),s=e("../events"),u=e("../../core/utils"),r=e("../base"),o=function(t){function e(){return a=e.__super__.constructor.apply(this,arguments)}return c(e,t),e.has_one=function(t,e){var n,i,o,a,l=this;if(null==e)throw Error("Has one require at least 'source' param");return e.foreign_key||(e.foreign_key=""+this.resource_name+"_id"),i=e.source.resource_name,n="bind_"+t,this.register_association(t),a="function"==typeof e.update_if?e.update_if:e.update_if===!0?u.truthy:u.falsey,e.source.listen(function(r){var o,c,p,h,_,f;if(l.all().length){if(r=r.data,r.type===s.Load){for(_=e.source.all(),f=[],p=0,h=_.length;h>p;p++)o=_[p],f.push(o[e.foreign_key]&&(c=l.get(o[e.foreign_key]))&&c.association(t)?c[n](o):void 0);return f}return o=r[i],o[e.foreign_key]&&(c=l.get(o[e.foreign_key]))&&c.association(t)&&(r.type===s.Destroy?delete l[t]:r.type===s.Create&&c[n](o,!0),a(r,o))?c.trigger_assoc_event(t,r.type,u.obj.wrap(t,l[t])):void 0}}),this.prototype[n]=function(n,r){return null==r&&(r=!1),null!=n?(this[t]=n,this._persisted&&!this[t][e.foreign_key]&&(this[t][e.foreign_key]=this.id),!r&&a(null,n)?this.trigger_assoc_event(t,s.Create,u.obj.wrap(t,this[t])):void 0):void 0},this.after_initialize(function(){var t;return this._persisted&&(t=e.source.get_by(u.obj.wrap(e.foreign_key,this.id)))?this[n](t,!0):void 0}),this.after_update(function(i){var o;if(!(i instanceof r))return this._persisted&&!this[t]&&(o=e.source.get_by(u.obj.wrap(e.foreign_key,this.id)))&&this[n](o,!0),i[t]?this[t]instanceof r?this[t].set(i[t]):this[n](e.source.build(i[t])):void 0}),e.destroy===!0&&this.before_destroy(function(){var e;return null!=(e=this[t])?e.remove():void 0}),e.attribute===!0?(o=this.prototype.attributes,this.prototype.attributes=function(){var e;return e=o.call(this),e[t]=this[t].attributes(),e}):void 0},e}(i),n.exports=o}}),require.define({"pieces-core/resources/modules/index":function(t,e,n){"use strict";var r={};r.HasMany=e("./has_many"),r.HasOne=e("./has_one"),n.exports=r}}),require.define({"pieces-core/resources/rest":function(t,e,n){"use strict";var r,i,o,s,u,a,l,c,p,h,_={}.hasOwnProperty,f=function(t,e){function n(){this.constructor=t}for(var r in e)_.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d=[].slice;r=e("./base"),i=e("../core/events").EventDispatcher,u=e("./events"),a=e("../core/utils"),o=e("../net"),c=/:\w+/g,l=/\/\//,h=/\/$/,s=function(t){function e(){return p=e.__super__.constructor.apply(this,arguments)}return f(e,t),e._rscope="/:path",e._globals={},e.prototype.wrap_attributes=!1,e.can_create=function(){var t;return t=1<=arguments.length?d.call(arguments,0):[],this.__deps__=(this.__deps__||(this.__deps__=[])).concat(t)},e.params=function(){var t;return t=1<=arguments.length?d.call(arguments,0):[],this.prototype.hasOwnProperty("__filter_params__")||(this.prototype.__filter_params__=[],this.prototype.__filter_params__.push("id")),this.prototype.__filter_params__=this.prototype.__filter_params__.concat(t)},e.set_resource=function(t,n){return e.__super__.constructor.set_resource.apply(this,arguments),this.routes({collection:[{action:"show",path:":resources/:id",method:"get"},{action:"fetch",path:":resources",method:"get"}],member:[{action:"update",path:":resources/:id",method:"patch"},{action:"__destroy",path:":resources/:id",method:"delete"},{action:"create",path:":resources",method:"post"}]}),this.prototype.destroy_path=":resources/:id"},e.set_globals=function(t){return a.extend(this._globals,t,!0)},e.routes=function(t){var e,n,r,i,o,s,u,l,c,p=this;if(null!=t.collection)for(u=t.collection,n=function(t){return p[t.action]=function(e){var n=this;return null==e&&(e={}),this._request(t.path,t.method,e).then(function(e){var r,i,o,s;if(null!=n.__deps__)for(s=n.__deps__,i=0,o=s.length;o>i;i++)r=s[i],r.from_data(e);return null!=n["on_"+t.action]?n["on_"+t.action](e):n.on_all(e)})},p[""+t.action+"_path"]=t.path},r=0,o=u.length;o>r;r++)e=u[r],n(e);if(null!=t.member){for(l=t.member,c=[],i=0,s=l.length;s>i;i++)e=l[i],c.push(function(t){return p.prototype[t.action]=function(e){var n=this;return null==e&&(e={}),this.constructor._request(t.path,t.method,a.merge(e,{id:this.id}),this).then(function(e){var r,i,o,s;if(null!=n.constructor.__deps__)for(s=n.constructor.__deps__,i=0,o=s.length;o>i;i++)r=s[i],r.from_data(e);return null!=n["on_"+t.action]?n["on_"+t.action](e):n.on_all(e)})},p.prototype[""+t.action+"_path"]=t.path}(e));return c}},e.routes_namespace=function(t){return this._rscope=t},e._interpolate_path=function(t,e,n){var r,i=this;return t=this._rscope.replace(":path",t).replace(l,"/").replace(h,""),r=this.prototype.wrap_attributes&&null!=e[this.resource_name]&&"object"==typeof e[this.resource_name]?a.extend(e[this.resource_name],e,!1,[this.resource_name]):e,t.replace(c,function(t){var e,o,s;return e=t.slice(1),null!=(o=null!=(s=r[e])?s:null!=n?n[e]:void 0)?o:i._globals[e]})},e.error=function(t,e){return i.Global.trigger("net_error",{resource:this.resources_name,action:t,message:e})},e._request=function(t,e,n,r){var i=this;return t=this._interpolate_path(t,a.merge(n,{resources:this.resources_name,resource:this.resource_name}),r),o[e].call(null,t,n)["catch"](function(t){throw i.error(t.message),t})},e.on_all=function(t){return null!=t[this.resources_name]&&(t[this.resources_name]=this.load(t[this.resources_name])),t},e.on_show=function(t){var e;return null!=t[this.resource_name]?e=this.build(t[this.resource_name]):void 0},e.find=function(t){var e;return e=this.get(t),null!=e?a.promise.resolved(e):this.show({id:t})},e.find_by=function(t){var e;return e=this.get_by(t),null!=e?a.promise.resolved(e):this.show(t)},e.create=function(t){var e;return e=this.build(t),e.save()},e.path=function(t,e,n){var r;return null==e&&(e={}),r=this[""+t+"_path"]||this.prototype[""+t+"_path"]||t,this._interpolate_path(r,e,n)},e.prototype.destroy=function(){return this._persisted?this.__destroy():a.promise.resolved(this.remove())},e.prototype.on_destroy=function(t){return this.constructor.remove(this),t},e.alias("on___destroy","on_destroy"),e.prototype.on_all=function(t){var e;return e=t[this.constructor.resource_name],null!=e?(this.set(e),this):void 0},e.prototype.on_create=function(t){var e;return e=t[this.constructor.resource_name],null!=e?(this.set(e),this):void 0},e.prototype.attributes=function(){return this.__attributes__changed__&&(this.__attributes__=this.__filter_params__?a.extract(this,this.__filter_params__):e.__super__.attributes.apply(this,arguments)),this.__attributes__},e.prototype.set=function(){return this.__attributes__changed__=!0,e.__super__.set.apply(this,arguments)},e.prototype.save=function(t){var e;return null==t&&(t={}),e=this.attributes(),a.extend(e,t,!0),e=this.wrap_attributes?this._wrap(e):e,this._persisted?this.update(e):this.create(e)},e.prototype.rollback=function(){var t,e,n,r,i;for(i=this.changes,e=n=0,r=i.length;r>n;e=++n)t=i[e],this[t]=this._snapshot[t];return this.changes={},this},e.register_callback("save"),e.prototype.path=function(t,e){return this.constructor.path(t,e,this)},e.prototype._wrap=function(t){var e;return e={},e[this.constructor.resource_name]=t,e},e}(r),n.exports=s}}),require.define({"pieces-core/resources/view":function(t,e,n){"use strict";var r,i,o,s,u,a,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("../core/events").EventDispatcher,a=e("../core/utils"),o=e("./events"),r=e("./base"),u=function(t){function e(t,n,r){this.view=t,this.options=null!=r?r:{},e.__super__.constructor.apply(this,arguments),null!=this.options.params&&this.options.params.indexOf("id")<0&&this.options.params.push("id"),this.changes={},this.set(n,!0)}return c(e,t),a.extend(e.prototype,r.prototype,!1),e.prototype.created=function(t){return this.view.created(this,t)},e.prototype.trigger=function(t,n,r){return null==r&&(r=!0),e.__super__.trigger.apply(this,arguments),this.view.trigger(t,this.view._wrap(this))},e.prototype.attributes=function(){var t;return null!=this.options.params?(t=a.extract(this,this.options.params),null!=this.options.id_alias&&(this.options.id_alias&&(t[this.options.id_alias]=t.id),delete t.id),t):r.prototype.attributes.call(this)},e}(i),s=function(t){function e(t,n,r){var i=this;this.resources=t,this.options=null!=r?r:{},e.__super__.constructor.apply(this,arguments),this.__all_by_id__={},this.__all_by_tid__={},this.__all__=[],this.resources_name=this.resources.resources_name,this.resource_name=this.resources.resource_name,this._filter=null!=n&&n!==!1?a.matchers.object_ext(n):a.truthy,this.resources.listen(function(t){var e,n;return e=t.data[i.resource_name],(null==e||i._filter(e))&&"function"==typeof i[n="on_"+t.data.type]?i[n](e):void 0})}return c(e,t),a.extend(e.prototype,r),e.prototype.on_update=function(t){var e;return(e=this.get(t.id))?e.set(t.attributes()):void 0},e.prototype.on_destroy=function(t){var e;return(e=this.get(t.id))?this.remove(e):void 0},e.prototype.clear_all=function(t){var e,n,r,i,o,s,u;if(null==t&&(t=!1),this.options.copy!==!1||t!==!1)if(t&&!this.options.copy)for(this.__all_by_id__={},this.__all_by_tid__={},s=this.__all__,n=0,i=s.length;i>n;n++)e=s[n],e.remove();else for(u=this.__all__,r=0,o=u.length;o>r;r++)e=u[r],e.dispose();return this.__all_by_id__={},this.__all_by_tid__={},this.__all__.length=0},e.prototype.build=function(t,e,n){var i;return null==t&&(t={}),null==e&&(e=!1),null==n&&(n={}),(i=this.get(t.id))?i.set(t,e):(t instanceof r&&this.options.copy===!1?i=t:(t instanceof r&&(t=t.attributes()),a.extend(t,n,!0),i=new u(this,t,this.options)),i.id&&(this.add(i),e||this.trigger(o.Create,this._wrap(i))),i)},e.prototype._wrap=function(t){return t instanceof u?a.obj.wrap(t.view.resource_name,t):t instanceof r?a.obj.wrap(t.constructor.resource_name,t):t},e.prototype.serialize=function(){var t,e,n,r,i;for(e=[],i=this.all(),n=0,r=i.length;r>n;n++)t=i[n],e.push(t.attributes());return e},e.prototype.listen=function(t){return this.on("update",t)},e.prototype.trigger=function(t,n){return n.type=t,e.__super__.trigger.call(this,"update",n)},e.prototype.off=function(t){return e.__super__.off.call(this,"update",t)},e}(i),n.exports=s}}),require.define({"pieces-core/views/base":function(t,e,n){"use strict";var r,i,o,s,u={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)u.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("../core/utils"),i=e("../components/base"),r=function(t){function e(){return s=e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.is_view=!0,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments)},e.prototype.postinitialize=function(){return this.init_modules(),e.__super__.postinitialize.apply(this,arguments)},e.prototype.init_modules=function(){var t,e,n,r;n=this.options.modules,r=[];for(t in n)e=n[t],r.push(this.mixin(this.constructor.lookup_module(t)));return r},e.prototype.loaded=function(t){},e.prototype.activated=function(t){},e.prototype.deactivated=function(){},e.prototype.unloaded=function(){},e}(i),o.extend(i.prototype,{view:function(){return this.__view__||(this.__view__=this._find_view())},context:function(){var t;return this.__controller__||(this.__controller__=null!=(t=this.view())?t.controller:void 0)},_find_view:function(){var t;for(t=this;t;){if(t.is_view===!0)return t;t=t.host}}}),n.exports=r}}),require.define({"pieces-core/views/index":function(t,e,n){"use strict";var r={};r.Base=e("./base"),n.exports=r}});